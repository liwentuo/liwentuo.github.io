<!DOCTYPE html>
<html lang='zh-CN'>

<head>
  <meta name="generator" content="Hexo 5.4.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://cdn.jsdelivr.net'>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  <title>Gradle编译优化 - Mark</title>

  
    <meta name="description" content="Kotlin 让人既爱有恨之编译速度优化写kotlin很久了，一直以来都不太满意kotlin的编译速度，特别是项目中大量使用kapt 。但是也能忍受。但自从我的电脑让我玩坏了之后。编译速度一度让我怀疑人生，总感觉星哥顺走了我的内存条。可惜我这里监控盲区😂，废话不多说让我们看看具体步骤优化前和优化后速度对 优化之前构建总耗时：241909ms·构建时间：2021-05-14 15:55:48开始构">
<meta property="og:type" content="article">
<meta property="og:title" content="Gradle编译优化">
<meta property="og:url" content="http://liwentuo.github.io/blog/Gradle%E7%BC%96%E8%AF%91%E4%BC%98%E5%8C%96/">
<meta property="og:site_name" content="Mark">
<meta property="og:description" content="Kotlin 让人既爱有恨之编译速度优化写kotlin很久了，一直以来都不太满意kotlin的编译速度，特别是项目中大量使用kapt 。但是也能忍受。但自从我的电脑让我玩坏了之后。编译速度一度让我怀疑人生，总感觉星哥顺走了我的内存条。可惜我这里监控盲区😂，废话不多说让我们看看具体步骤优化前和优化后速度对 优化之前构建总耗时：241909ms·构建时间：2021-05-14 15:55:48开始构">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-08-23T16:00:00.000Z">
<meta property="article:modified_time" content="2021-08-23T16:00:00.000Z">
<meta property="article:author" content="david">
<meta property="article:tag" content="Gradle">
<meta name="twitter:card" content="summary">
  
  

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="Mark" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  

  
</head>

<body>
  


  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    


<header class="header">

<div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.2/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://i.loli.net/2021/09/22/hsX8ka5zQJeGDUb.jpg" onerror="javascript:this.classList.add('error');this.src='https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/image/2659360.svg';"></a><a class="title" href="/"><div class="main">Mark</div><div class="sub normal cap">Daivd</div><div class="sub hover cap" style="opacity:0">angle.lwt@qq.com</div></a></div>
<nav class="menu dis-select"><a class="nav-item active" href="/">博客</a><a class="nav-item" href="/wiki/">项目</a><a class="nav-item" href="/notes/">便笺</a><a class="nav-item" href="/about/">关于Mark</a></nav></header>

<div class="widgets">

<div class="widget-wrap single" id="toc"><div class="widget-header cap dis-select"><span class="name">本文目录</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Kotlin-%E8%AE%A9%E4%BA%BA%E6%97%A2%E7%88%B1%E6%9C%89%E6%81%A8%E4%B9%8B%E7%BC%96%E8%AF%91%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96"><span class="toc-text">Kotlin 让人既爱有恨之编译速度优化</span></a></li></ol></div></div></div>


</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" title="GitHub" href="https://github.com/liwentuo" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.3/social/08a41b181ce68.svg"/></a><a class="social" title="Unsplash" href="https://unsplash.com/@angledaivd" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.3/social/3616429.svg"/></a><a class="social" title="Comments" href="/about/#comments" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.3/social/942ebbf1a4b91.svg"/></a></div></footer>

    </aside>
    <div class='l_main'>
      

      


<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">Mark</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/blog/categories/gradle/">Gradle</a></div><div id="post-meta">发布于&nbsp;<time datetime="2021-08-23T16:00:00.000Z">2021年8月24日</time></div></div>

<article class='content md post'>
<h1 class="article-title"><span>Gradle编译优化</span></h1>
<h3 id="Kotlin-让人既爱有恨之编译速度优化"><a href="#Kotlin-让人既爱有恨之编译速度优化" class="headerlink" title="Kotlin 让人既爱有恨之编译速度优化"></a>Kotlin 让人既爱有恨之编译速度优化</h3><p>写kotlin很久了，一直以来都不太满意kotlin的编译速度，特别是项目中大量使用kapt 。但是也能忍受。但自从我的电脑让我玩坏了之后。编译速度一度让我怀疑人生，总感觉星哥顺走了我的内存条。可惜我这里监控盲区😂，废话不多说让我们看看具体步骤<br>优化前和优化后速度对</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">优化之前构建总耗时：241909ms·</span><br><span class="line">构建时间：2021-05-14 15:55:48</span><br><span class="line">开始构建----------------------</span><br><span class="line">[:clean]:25ms</span><br><span class="line">[:component:Chatjoy:clean]:4952ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:clean]:355ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:clean]:88ms</span><br><span class="line">[:component:Chatjoy:ucrop:clean]:155ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:clean]:107ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:preDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugAidl]:15ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugJniLibFolders]:30ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugNativeLibs]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:stripDebugDebugSymbols]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugRenderscript]:4ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugBuildConfig]:18ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugResValues]:2ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:packageDebugResources]:170ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:copyDebugJniLibsProjectAndLocalJars]:14ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugShaders]:12ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugShaders]:2ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:packageDebugAssets]:15ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:packageDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:processDebugJavaRes]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:prepareLintJarForPublish]:4ms</span><br><span class="line">[:component:Chatjoy:ucrop:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:preDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugAidl]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugJniLibFolders]:12ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugNativeLibs]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:stripDebugDebugSymbols]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:writeDebugAarMetadata]:8ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugRenderscript]:2ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugBuildConfig]:14ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugResValues]:3ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:packageDebugResources]:451ms</span><br><span class="line">[:component:Chatjoy:ucrop:copyDebugJniLibsProjectAndLocalJars]:6ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugShaders]:10ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugShaders]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:packageDebugAssets]:9ms</span><br><span class="line">[:component:Chatjoy:ucrop:packageDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:processDebugJavaRes]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:parseDebugLocalResources]:14ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:preDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugAidl]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugJniLibFolders]:44ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugNativeLibs]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:stripDebugDebugSymbols]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:writeDebugAarMetadata]:11ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugBuildConfig]:12ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugResValues]:2ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:packageDebugResources]:21ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugJavaResource]:7ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:parseDebugLocalResources]:10ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugShaders]:18ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugShaders]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:packageDebugAssets]:12ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:packageDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:processDebugJavaRes]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:prepareLintJarForPublish]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:preDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugAidl]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugJniLibFolders]:13ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugNativeLibs]:2ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:stripDebugDebugSymbols]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:processDebugManifest]:50ms</span><br><span class="line">[:component:Chatjoy:ucrop:processDebugManifest]:338ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:copyDebugJniLibsProjectAndLocalJars]:79ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugBuildConfig]:18ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugResValues]:3ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugResources]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:packageDebugResources]:720ms</span><br><span class="line">[:component:Chatjoy:ucrop:javaPreCompileDebug]:5ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:javaPreCompileDebug]:4ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugShaders]:16ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugShaders]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:packageDebugAssets]:9ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:processDebugManifest]:39ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:packageDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:processDebugJavaRes]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:processDebugManifest]:31ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugJavaResource]:3ms</span><br><span class="line">[:component:Chatjoy:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:preChatjoyLocalDevelopDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugAidl]:1ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugRFile]:419ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugKotlin]:5241ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugJavaWithJavac]:665ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:extractDebugAnnotations]:20770ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugGeneratedProguardFiles]:7ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugConsumerProguardFiles]:4ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:parseDebugLocalResources]:11ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugSources]:1ms</span><br><span class="line">[:component:Chatjoy:generateChatjoyLocalDevelopDebugResValues]:2ms</span><br><span class="line">[:component:Chatjoy:generateChatjoyLocalDevelopDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:injectCrashlyticsMappingFileIdChatjoyLocalDevelopDebug]:15ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugGoogleServices]:16ms</span><br><span class="line">[:component:Chatjoy:ucrop:prepareLintJarForPublish]:8492ms</span><br><span class="line">[:component:Chatjoy:dataBindingTriggerChatjoyLocalDevelopDebug]:12ms</span><br><span class="line">[:component:Chatjoy:generateChatjoyLocalDevelopDebugBuildConfig]:13ms</span><br><span class="line">[:component:Chatjoy:createChatjoyLocalDevelopDebugCompatibleScreenManifests]:9ms</span><br><span class="line">[:component:Chatjoy:extractDeepLinksChatjoyLocalDevelopDebug]:3ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:extractDeepLinksDebug]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:extractDeepLinksDebug]:4ms</span><br><span class="line">[:component:Chatjoy:ucrop:extractDeepLinksDebug]:4ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:extractDeepLinksDebug]:4ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugMainManifest]:1121ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugManifest]:18ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:writeDebugAarMetadata]:20ms</span><br><span class="line">[:component:Chatjoy:dataBindingMergeDependencyArtifactsChatjoyLocalDevelopDebug]:47ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:prepareLintJarForPublish]:6ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:writeDebugAarMetadata]:14ms</span><br><span class="line">[:component:Chatjoy:dataBindingMergeGenClassesChatjoyLocalDevelopDebug]:138ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugNativeDebugMetadata]:1ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugShaders]:13ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugShaders]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugLibraryResources]:45ms</span><br><span class="line">[:component:Chatjoy:checkChatjoyLocalDevelopDebugAarMetadata]:49ms</span><br><span class="line">[:component:Chatjoy:generateChatjoyLocalDevelopDebugAssets]:1ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugAssets]:167ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugJavaRes]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:bundleLibResDebug]:2ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:javaPreCompileDebug]:12ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugJavaResource]:25ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:syncDebugLibJars]:110ms</span><br><span class="line">[:component:Chatjoy:ucrop:bundleLibResDebug]:1ms</span><br><span class="line">[:component:Chatjoy:checkChatjoyLocalDevelopDebugDuplicateClasses]:389ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugJniLibFolders]:50ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:bundleLibRuntimeToJarDebug]:70ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:copyDebugJniLibsProjectOnly]:74ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugRFile]:22ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugJavaWithJavac]:1848ms</span><br><span class="line">[:component:Chatjoy:ucrop:extractDebugAnnotations]:2327ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugGeneratedProguardFiles]:13ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugConsumerProguardFiles]:6ms</span><br><span class="line">[:component:Chatjoy:ucrop:syncDebugLibJars]:47ms</span><br><span class="line">[:component:Chatjoy:ucrop:bundleDebugAar]:76ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:assembleDebug]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugLibraryResources]:392ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugLibraryResources]:1438ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugResources]:6562ms</span><br><span class="line">[:component:Chatjoy:dataBindingGenBaseClassesChatjoyLocalDevelopDebug]:1400ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:bundleLibCompileToJarDebug]:10ms</span><br><span class="line">[:component:Chatjoy:ucrop:copyDebugJniLibsProjectOnly]:2ms</span><br><span class="line">[:component:Chatjoy:validateSigningChatjoyLocalDevelopDebug]:23ms</span><br><span class="line">[:component:Chatjoy:writeChatjoyLocalDevelopDebugAppMetadata]:7ms</span><br><span class="line">[:component:Chatjoy:writeChatjoyLocalDevelopDebugSigningConfigVersions]:9ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugRFile]:25ms</span><br><span class="line">[:component:Chatjoy:desugarChatjoyLocalDevelopDebugFileDependencies]:49ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugLibraryResources]:20177ms</span><br><span class="line">[:component:Chatjoy:compressChatjoyLocalDevelopDebugAssets]:20235ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:parseDebugLocalResources]:20245ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:copyDebugJniLibsProjectOnly]:106ms</span><br><span class="line">[:component:Chatjoy:ucrop:bundleLibCompileToJarDebug]:115ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugJavaWithJavac]:4748ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:extractDebugAnnotations]:118ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugGeneratedProguardFiles]:11ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugConsumerProguardFiles]:3ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:syncDebugLibJars]:85ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:bundleDebugAar]:70ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:assembleDebug]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:bundleLibRuntimeToJarDebug]:8ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:javaPreCompileDebug]:4ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugManifestForPackage]:23ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:copyDebugJniLibsProjectAndLocalJars]:26ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:bundleDebugAar]:45ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:assembleDebug]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:copyDebugJniLibsProjectOnly]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:bundleLibRuntimeToJarDebug]:11ms</span><br><span class="line">[:component:Chatjoy:mergeExtDexChatjoyLocalDevelopDebug]:135ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:bundleLibCompileToJarDebug]:148ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:bundleLibResDebug]:160ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugRFile]:196ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugKotlin]:2678ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugJavaWithJavac]:251ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:extractDebugAnnotations]:22ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugGeneratedProguardFiles]:6ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugConsumerProguardFiles]:4ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugJavaResource]:4ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:syncDebugLibJars]:130ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:bundleDebugAar]:21ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:assembleDebug]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:bundleLibCompileToJarDebug]:9ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:bundleLibRuntimeToJarDebug]:17ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:bundleLibResDebug]:28ms</span><br><span class="line">[:component:Chatjoy:mergeLibDexChatjoyLocalDevelopDebug]:95ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugResources]:1402ms</span><br><span class="line">[:component:Chatjoy:kaptGenerateStubsChatjoyLocalDevelopDebugKotlin]:34867ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugNativeLibs]:8741ms</span><br><span class="line">[:component:Chatjoy:stripChatjoyLocalDevelopDebugDebugSymbols]:722ms</span><br><span class="line">[:component:Chatjoy:kaptChatjoyLocalDzevelopDebugKotlin]:7521ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugKotlin]:53627ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugJavaWithJavac]:14159ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:dexBuilderChatjoyLocalDevelopDebug]:18209ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugJavaResource]:4750ms</span><br><span class="line">[:component:Chatjoy:mergeProjectDexChatjoyLocalDevelopDebug]:4859ms</span><br><span class="line">[:component:Chatjoy:packageChatjoyLocalDevelopDebug]:1797ms</span><br><span class="line">[:component:Chatjoy:assembleChatjoyLocalDevelopDebug]:0ms</span><br><span class="line">构建结束----------------------</span><br><span class="line">构建总耗时：241909ms</span><br></pre></td></tr></table></figure>
<p>可以看到具体的耗时任务如上，主要是kapt相关的编译和编译kotlin代码<br>优化后 构建总耗时：22751ms</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">构建时间：2021-05-14 16:11:02</span><br><span class="line">开始构建----------------------</span><br><span class="line">[:clean]:2ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:clean]:87ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:preDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugAidl]:2ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:clean]:3ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:preDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugAidl]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugJniLibFolders]:8ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugNativeLibs]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:stripDebugDebugSymbols]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugJniLibFolders]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugNativeLibs]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:stripDebugDebugSymbols]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:copyDebugJniLibsProjectAndLocalJars]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:copyDebugJniLibsProjectAndLocalJars]:3ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:clean]:2ms</span><br><span class="line">[:component:Chatjoy:ucrop:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:preDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugAidl]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugBuildConfig]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugBuildConfig]:2ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugResValues]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugResValues]:3ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugJniLibFolders]:4ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugNativeLibs]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:stripDebugDebugSymbols]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:copyDebugJniLibsProjectAndLocalJars]:3ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:packageDebugResources]:9ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugBuildConfig]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugResValues]:3ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:packageDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:parseDebugLocalResources]:8ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:parseDebugLocalResources]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:processDebugManifest]:11ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:processDebugManifest]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:packageDebugResources]:26ms</span><br><span class="line">[:component:Chatjoy:ucrop:parseDebugLocalResources]:12ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:clean]:2ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:preDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugAidl]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:processDebugManifest]:5ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugJniLibFolders]:6ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugNativeLibs]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:stripDebugDebugSymbols]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:copyDebugJniLibsProjectAndLocalJars]:4ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugBuildConfig]:12ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugRFile]:4ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugResValues]:4ms</span><br><span class="line">[:component:Chatjoy:ucrop:javaPreCompileDebug]:4ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugRFile]:8ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:processDebugManifest]:4ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugRFile]:4ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:javaPreCompileDebug]:3ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugShaders]:5ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugShaders]:2ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:packageDebugAssets]:4ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:packageDebugRenderscript]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:prepareLintJarForPublish]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:processDebugJavaRes]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugJavaResource]:5ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:writeDebugAarMetadata]:2ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:extractDeepLinksDebug]:3ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:bundleLibResDebug]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:copyDebugJniLibsProjectOnly]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugKotlin]:4ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:javaPreCompileDebug]:3ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugKotlin]:5ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:javaPreCompileDebug]:4ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugJavaWithJavac]:5ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugJavaWithJavac]:9ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:extractDebugAnnotations]:17ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:extractDebugAnnotations]:17ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugGeneratedProguardFiles]:2ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugGeneratedProguardFiles]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugConsumerProguardFiles]:2ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugConsumerProguardFiles]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugShaders]:3ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugShaders]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugShaders]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:generateDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugShaders]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:generateDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:packageDebugAssets]:2ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:packageDebugRenderscript]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:prepareLintJarForPublish]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:packageDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:processDebugJavaRes]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:packageDebugRenderscript]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:prepareLintJarForPublish]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:processDebugJavaRes]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:mergeDebugJavaResource]:10ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:mergeDebugJavaResource]:13ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:syncDebugLibJars]:13ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugJavaWithJavac]:14ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:writeDebugAarMetadata]:2ms</span><br><span class="line">[:component:Chatjoy:ucrop:extractDebugAnnotations]:18ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:syncDebugLibJars]:3ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugGeneratedProguardFiles]:3ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugConsumerProguardFiles]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:writeDebugAarMetadata]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugShaders]:2ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugShaders]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:generateDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:packageDebugAssets]:4ms</span><br><span class="line">[:component:Chatjoy:ucrop:packageDebugRenderscript]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:prepareLintJarForPublish]:2ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugRenderscript]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:processDebugJavaRes]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:mergeDebugJavaResource]:2ms</span><br><span class="line">[:component:Chatjoy:ucrop:syncDebugLibJars]:13ms</span><br><span class="line">[:component:Chatjoy:ucrop:writeDebugAarMetadata]:3ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:packageDebugResources]:81ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:parseDebugLocalResources]:8ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:bundleDebugAar]:18ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:assembleDebug]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:extractDeepLinksDebug]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:compileDebugLibraryResources]:9ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:bundleLibCompileToJarDebug]:12ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:generateDebugRFile]:3ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:bundleLibResDebug]:6ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:bundleLibRuntimeToJarDebug]:12ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:bundleDebugAar]:1ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:assembleDebug]:0ms</span><br><span class="line">[:component:Chatjoy:sharelibrary:copyDebugJniLibsProjectOnly]:2ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:extractDeepLinksDebug]:3ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:compileDebugLibraryResources]:15ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:bundleLibCompileToJarDebug]:12ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:bundleLibResDebug]:9ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:bundleLibRuntimeToJarDebug]:10ms</span><br><span class="line">[:component:Chatjoy:util<span class="built_in">_</span>library:copyDebugJniLibsProjectOnly]:3ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugLibraryResources]:14ms</span><br><span class="line">[:component:Chatjoy:ucrop:bundleDebugAar]:87ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:assembleDebug]:0ms</span><br><span class="line">[:component:Chatjoy:ucrop:bundleLibCompileToJarDebug]:11ms</span><br><span class="line">[:component:Chatjoy:ucrop:extractDeepLinksDebug]:3ms</span><br><span class="line">[:component:Chatjoy:ucrop:compileDebugLibraryResources]:34ms</span><br><span class="line">[:component:Chatjoy:ucrop:bundleLibResDebug]:1ms</span><br><span class="line">[:component:Chatjoy:ucrop:bundleLibRuntimeToJarDebug]:13ms</span><br><span class="line">[:component:Chatjoy:ucrop:copyDebugJniLibsProjectOnly]:3ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugJavaWithJavac]:334ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:extractDebugAnnotations]:16ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugGeneratedProguardFiles]:5ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:mergeDebugConsumerProguardFiles]:1ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:syncDebugLibJars]:20ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:bundleDebugAar]:491ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:compileDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:assembleDebug]:0ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:bundleLibCompileToJarDebug]:23ms</span><br><span class="line">[:component:Chatjoy:picture<span class="built_in">_</span>library:bundleLibRuntimeToJarDebug]:19ms</span><br><span class="line">[:component:Chatjoy:clean]:3377ms</span><br><span class="line">[:component:Chatjoy:preBuild]:0ms</span><br><span class="line">[:component:Chatjoy:preChatjoyLocalDevelopDebugBuild]:0ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugAidl]:1ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugRenderscript]:1ms</span><br><span class="line">[:component:Chatjoy:dataBindingMergeDependencyArtifactsChatjoyLocalDevelopDebug]:189ms</span><br><span class="line">[:component:Chatjoy:dataBindingMergeGenClassesChatjoyLocalDevelopDebug]:22ms</span><br><span class="line">[:component:Chatjoy:generateChatjoyLocalDevelopDebugResValues]:3ms</span><br><span class="line">[:component:Chatjoy:generateChatjoyLocalDevelopDebugResources]:0ms</span><br><span class="line">[:component:Chatjoy:injectCrashlyticsMappingFileIdChatjoyLocalDevelopDebug]:10ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugGoogleServices]:8ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugResources]:789ms</span><br><span class="line">[:component:Chatjoy:dataBindingGenBaseClassesChatjoyLocalDevelopDebug]:151ms</span><br><span class="line">[:component:Chatjoy:dataBindingTriggerChatjoyLocalDevelopDebug]:7ms</span><br><span class="line">[:component:Chatjoy:generateChatjoyLocalDevelopDebugBuildConfig]:8ms</span><br><span class="line">[:component:Chatjoy:checkChatjoyLocalDevelopDebugAarMetadata]:22ms</span><br><span class="line">[:component:Chatjoy:createChatjoyLocalDevelopDebugCompatibleScreenManifests]:7ms</span><br><span class="line">[:component:Chatjoy:extractDeepLinksChatjoyLocalDevelopDebug]:7ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugMainManifest]:34ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugManifest]:10ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugManifestForPackage]:8ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugResources]:172ms</span><br><span class="line">[:component:Chatjoy:kaptGenerateStubsChatjoyLocalDevelopDebugKotlin]:1408ms</span><br><span class="line">[:component:Chatjoy:kaptChatjoyLocalDevelopDebugKotlin]:470ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugKotlin]:1038ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugJavaWithJavac]:2849ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugSources]:0ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugNativeDebugMetadata]:0ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugShaders]:8ms</span><br><span class="line">[:component:Chatjoy:compileChatjoyLocalDevelopDebugShaders]:0ms</span><br><span class="line">[:component:Chatjoy:generateChatjoyLocalDevelopDebugAssets]:0ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugAssets]:33ms</span><br><span class="line">[:component:Chatjoy:compressChatjoyLocalDevelopDebugAssets]:16ms</span><br><span class="line">[:component:Chatjoy:processChatjoyLocalDevelopDebugJavaRes]:0ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugJavaResource]:790ms</span><br><span class="line">[:component:Chatjoy:checkChatjoyLocalDevelopDebugDuplicateClasses]:42ms</span><br><span class="line">[:component:Chatjoy:dexBuilderChatjoyLocalDevelopDebug]:2929ms</span><br><span class="line">[:component:Chatjoy:mergeLibDexChatjoyLocalDevelopDebug]:20ms</span><br><span class="line">[:component:Chatjoy:mergeProjectDexChatjoyLocalDevelopDebug]:91ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugJniLibFolders]:430ms</span><br><span class="line">[:component:Chatjoy:mergeChatjoyLocalDevelopDebugNativeLibs]:1875ms</span><br><span class="line">[:component:Chatjoy:stripChatjoyLocalDevelopDebugDebugSymbols]:1093ms</span><br><span class="line">[:component:Chatjoy:validateSigningChatjoyLocalDevelopDebug]:6ms</span><br><span class="line">[:component:Chatjoy:writeChatjoyLocalDevelopDebugAppMetadata]:7ms</span><br><span class="line">[:component:Chatjoy:writeChatjoyLocalDevelopDebugSigningConfigVersions]:7ms</span><br><span class="line">[:component:Chatjoy:desugarChatjoyLocalDevelopDebugFileDependencies]:31ms</span><br><span class="line">[:component:Chatjoy:mergeExtDexChatjoyLocalDevelopDebug]:736ms</span><br><span class="line">[:component:Chatjoy:packageChatjoyLocalDevelopDebug]:1744ms</span><br><span class="line">[:component:Chatjoy:assembleChatjoyLocalDevelopDebug]:0ms</span><br><span class="line">构建结束----------------------</span><br><span class="line">构建总耗时：22751ms</span><br></pre></td></tr></table></figure>

<p>起飞了有木有哈哈！<br>优化具体步骤<br>1.在gradle.properties添加如下配置</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">//开启gradle并行编译，开启daemon，调整jvm内存大小</span></span><br><span class="line">org.gradle.daemon=<span class="literal">true</span></span><br><span class="line">org.gradle.configureondemand=<span class="literal">true</span></span><br><span class="line">org.gradle.parallel=<span class="literal">true</span></span><br><span class="line">org.gradle.jvmargs=-Xmx4096m -<span class="attr">XX:</span>MaxPermSize=<span class="number">1024</span>m -<span class="attr">XX:</span>+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF<span class="number">-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//开启gradle缓存</span></span><br><span class="line">org.gradle.caching=<span class="literal">true</span></span><br><span class="line">android.enableBuildCache=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//开启kotlin的增量和并行编译</span></span><br><span class="line">kotlin.incremental=<span class="literal">true</span></span><br><span class="line">kotlin.incremental.java=<span class="literal">true</span></span><br><span class="line">kotlin.incremental.js=<span class="literal">true</span></span><br><span class="line">kotlin.caching.enabled=<span class="literal">true</span></span><br><span class="line">kotlin.parallel.tasks.<span class="keyword">in</span>.project=<span class="literal">true</span> <span class="comment">//开启kotlin并行编译</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//优化kapt</span></span><br><span class="line">kapt.use.worker.api=<span class="literal">true</span> <span class="comment">//并行运行kapt1.2.60版本以上支持</span></span><br><span class="line">kapt.incremental.apt=<span class="literal">true</span> <span class="comment">//增量编译 kapt1.3.30版本以上支持</span></span><br><span class="line"><span class="comment">//kapt avoiding 如果用kapt依赖的内容没有变化，会完全重用编译内容，省掉最上图中的:app:kaptGenerateStubsDebugKotlin的时间</span></span><br><span class="line">kapt.include.compile.classpath=<span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>2.在app gradle添加如下配置</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">//kapt添加如下配置</span></span><br><span class="line">kapt &#123;</span><br><span class="line">    useBuildCache = <span class="literal">true</span></span><br><span class="line">    javacOptions &#123;</span><br><span class="line">        option(<span class="string">&quot;-Xmaxerrs&quot;</span>, <span class="number">500</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在Android代码块中添加如下配置：（可优化transformClassDexBuilderForDebug的时间）</span></span><br><span class="line">    dexOptions &#123;</span><br><span class="line">        preDexLibraries <span class="literal">true</span></span><br><span class="line">        maxProcessCount <span class="number">8</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>以上就是优化gradle编译时间的配置.其他不太重要的优化，好像对时间影响不算特别大。大家也可以根据自己的项目做针对优化。<br>查看自己项目中gradle编译中具体所用的时间<br>1.创建buildTrace.gradle文件</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 监控构建耗时</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 记录构建过程中的每个任务的耗时，并写入文件中 .build_history/buildTimeLog_yy_MM_dd_HH_mm_ss.log中</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 使用时将文件放在app目录下,然后在app/build.gradle中添加引用:</span></span><br><span class="line"><span class="comment"> * apply from: &quot;./buildTrace.gradle&quot;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuildTimeListener</span> <span class="keyword">implements</span> <span class="title">TaskExecutionListener</span>, <span class="title">BuildListener</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String BUILD_LOG_FILE_DIR = <span class="string">&quot;.build_history&quot;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String BUILD_LOG_FILE_PATH = <span class="string">&quot;buildTimeLog&quot;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> taskStartTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> buildStartTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> taskCounts = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> StringBuilder sb = <span class="keyword">new</span> StringBuilder()</span><br><span class="line">    <span class="keyword">private</span> SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> SimpleDateFormat sdf2 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy_MM_dd_HH_mm_ss&quot;</span>)</span><br><span class="line"></span><br><span class="line">    BuildTimeListener() &#123;</span><br><span class="line">        buildStartTime = System.currentTimeMillis()</span><br><span class="line">        <span class="comment">//添加一些版本信息</span></span><br><span class="line"><span class="comment">//        sb.append(&quot;codeTag:&quot;).append(ProjectConfig.codeTag).append(&quot;\n&quot;)</span></span><br><span class="line"><span class="comment">//        sb.append(&quot;branch:&quot;).append(ProjectConfig.branch).append(&quot;\n&quot;)</span></span><br><span class="line"><span class="comment">//        sb.append(&quot;versionName:&quot;).append(ProjectConfig.versionName).append(&quot;\n&quot;)</span></span><br><span class="line"><span class="comment">//        sb.append(&quot;versionCode:&quot;).append(ProjectConfig.versionCode).append(&quot;\n&quot;)</span></span><br><span class="line">        sb.append(<span class="string">&quot;构建时间：&quot;</span> + sdf.format(<span class="keyword">new</span> Date()) + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">        sb.append(<span class="string">&quot;开始构建----------------------\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildStarted</span><span class="params">(Gradle gradle)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">settingsEvaluated</span><span class="params">(Settings settings)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">projectsLoaded</span><span class="params">(Gradle gradle)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">projectsEvaluated</span><span class="params">(Gradle gradle)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构建完成回调</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result The result of the build. Never null.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildFinished</span><span class="params">(BuildResult result)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(taskCounts&lt;<span class="number">5</span>) <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">long</span> buildCost = System.currentTimeMillis() - buildStartTime</span><br><span class="line">        sb.append(<span class="string">&quot;构建结束----------------------\n&quot;</span>)</span><br><span class="line">        sb.append(<span class="string">&quot;构建总耗时：&quot;</span> + buildCost + <span class="string">&quot;ms&quot;</span>)</span><br><span class="line">        <span class="comment">//输出到文件</span></span><br><span class="line">        String text = sb.toString()</span><br><span class="line">        writeToFile(BUILD_LOG_FILE_PATH, text)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 任务执行开始</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> task The task about to be executed. Never null.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">beforeExecute</span><span class="params">(Task task)</span> </span>&#123;</span><br><span class="line">        taskStartTime = System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 任务执行结束</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> task The task which was executed. Never null.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> state The task state. If the task failed with an exception, the exception is available in this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">afterExecute</span><span class="params">(Task task, TaskState state)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> cost = System.currentTimeMillis() - taskStartTime;</span><br><span class="line">        System.out.println(<span class="string">&quot;任务：&quot;</span> + task.name + <span class="string">&quot;,&quot;</span> + task.path + <span class="string">&quot;,耗时：&quot;</span> + cost);</span><br><span class="line">        sb.append(<span class="string">&quot;[&quot;</span> + task.path + <span class="string">&quot;]:&quot;</span> + cost + <span class="string">&quot;ms\n&quot;</span>)</span><br><span class="line">        taskCounts++</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeToFile</span><span class="params">(String fname, String text)</span> </span>&#123;</span><br><span class="line">        File dir = <span class="keyword">new</span> File(BUILD_LOG_FILE_DIR)</span><br><span class="line">        <span class="keyword">if</span> (!dir.exists()) &#123;</span><br><span class="line">            dir.mkdir()</span><br><span class="line">        &#125;</span><br><span class="line">        File file = <span class="keyword">new</span> File(BUILD_LOG_FILE_DIR + File.separator + fname + <span class="string">&quot;_&quot;</span> + sdf2.format(<span class="keyword">new</span> Date()) + <span class="string">&quot;.log&quot;</span>)</span><br><span class="line">        file.write(text, <span class="keyword">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">gradle.<span class="function">addListener new <span class="title">BuildTimeListener</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>2.在app项目中引用</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">apply <span class="attr">from:</span> <span class="string">&#x27;buildTrace.gradle&#x27;</span></span><br></pre></td></tr></table></figure>

<p>大家如果有更好的方案，还请多多指教！</p>


<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用署名-非商业性使用-相同方式共享 4.0 国际许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="header cap theme"><span>接下来阅读</span></section><section class="body fs14"><div class="line"></div><a id="prev" href="/blog/Untitled/">ViewPager实现竖向滑动<span class="note">较新</span></a><div class="line"></div><a id="more" href="/blog/archives">检索全部文章</a></section></div>






  <div class='related-wrap md reveal' id="comments">
    <div class='cmt-title cap theme'>
      快来参与讨论吧
    </div>
    <div class='cmt-body beaudar'>
      

<svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg>

<div id="beaudar" repo="liwentuo/blog-comments" issue-term="pathname" theme="preferred-color-scheme" input-position="top" comment-order="desc" loading="false" branch="main"></div>

    </div>
  </div>



      
<footer class="page-footer reveal fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">博客</span><a href="/">近期发布</a><a href="/blog/categories/">分类</a><a href="/blog/tags/">标签</a><a href="/blog/archives/">归档</a></div><div class="sitemap-group"><span class="fs14">项目</span><a href="/wiki/tags/%E5%BC%80%E6%BA%90%E5%BA%93/">开源库</a><a href="/wiki/tags/%E5%AE%9E%E7%94%A8%E8%84%9A%E6%9C%AC/">实用脚本</a><a href="/wiki/tags/%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98/">博客主题</a><a href="/wiki/tags/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/">应用程序</a></div><div class="sitemap-group"><span class="fs14">社交</span><a href="/friends/">友链</a><a href="/about/#comments">留言板</a></div><div class="sitemap-group"><span class="fs14">更多</span><a href="/about/">关于本站</a><a target="_blank" rel="noopener" href="https://github.com/liwentuo">GitHub</a></div></div><div class="text"><p>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
<p>本站由 <a href="http://liwentuo.github.io/">@david</a> 创建，使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.5.1" title="v1.5.1">Stellar</a> 作为主题，您可以在 <a target="_blank" rel="noopener" href="https://github.com/liwentuo/liwentuo.github.io">GitHub</a> 找到本站源码。</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.5.1';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/js/plugins/sites.js',
    friendsjs: '/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@6/swiper-bundle.min.css","js":"https://unpkg.com/swiper@6/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://cdn.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->

  <script>
  function loadBeaudar() {
    const els = document.querySelectorAll("#comments #beaudar");
    if (els.length === 0) return;
    els.forEach((el, i) => {
      try {
        el.innerHTML = '';
      } catch (error) {
        console.log(error);
      }
      var script = document.createElement('script');
      script.src = 'https://beaudar.lipk.org/client.js';
      script.async = true;
      for (let key of Object.keys(el.attributes)) {
        let attr = el.attributes[key];
        if (['class', 'id'].includes(attr.name) === false) {
          script.setAttribute(attr.name, attr.value);
        }
      }
      el.appendChild(script);
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
      loadBeaudar();
  });
</script>




<!-- inject -->


  </div>
</body>
</html>
