<!DOCTYPE html>
<html lang='zh-CN'>

<head>
  <meta name="generator" content="Hexo 5.4.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://cdn.jsdelivr.net'>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  <title>é‡æ‹¾Gradle - Mark</title>

  
    <meta name="description" content="å·¥ç¨‹æ„å»ºå·¥å…·ä»å¤è€çš„ mkã€makeã€cmakeã€qmake, å†åˆ°æˆç†Ÿçš„ antã€mavenã€ivyï¼Œæœ€ååˆ°å¦‚ä»Šäº’è”ç½‘æ—¶ä»£çš„ sbtã€gradleï¼Œç»å†äº†é•¿ä¹…çš„å†å²æ¼”åŒ–ä¸å˜è¿ã€‚ Gradle ä½œä¸ºä¸€æ¬¾æ–°ç”Ÿä»£çš„æ„å»ºå·¥å…·æ— ç–‘æ˜¯æœ‰å®ƒè‡ªèº«çš„å·¨å¤§ä¼˜åŠ¿çš„ï¼Œå› æ­¤ï¼ŒæŒæ¡å¥½ Gradle æ„å»ºå·¥å…·çš„å„ç§ä½¿ç”¨å§¿åŠ¿ä¸ä½¿ç”¨åœºæ™¯å…¶é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ æ­¤å¤–ï¼ŒGradle å·²ç»æˆä¸º é«˜çº§ Android çŸ¥è¯†ä½“ç³» å¿…ä¸å¯å°‘çš„ä¸€">
<meta property="og:type" content="article">
<meta property="og:title" content="é‡æ‹¾Gradle">
<meta property="og:url" content="http://liwentuo.github.io/blog/2021-11-2-%E9%87%8D%E8%AF%86Gradle/">
<meta property="og:site_name" content="Mark">
<meta property="og:description" content="å·¥ç¨‹æ„å»ºå·¥å…·ä»å¤è€çš„ mkã€makeã€cmakeã€qmake, å†åˆ°æˆç†Ÿçš„ antã€mavenã€ivyï¼Œæœ€ååˆ°å¦‚ä»Šäº’è”ç½‘æ—¶ä»£çš„ sbtã€gradleï¼Œç»å†äº†é•¿ä¹…çš„å†å²æ¼”åŒ–ä¸å˜è¿ã€‚ Gradle ä½œä¸ºä¸€æ¬¾æ–°ç”Ÿä»£çš„æ„å»ºå·¥å…·æ— ç–‘æ˜¯æœ‰å®ƒè‡ªèº«çš„å·¨å¤§ä¼˜åŠ¿çš„ï¼Œå› æ­¤ï¼ŒæŒæ¡å¥½ Gradle æ„å»ºå·¥å…·çš„å„ç§ä½¿ç”¨å§¿åŠ¿ä¸ä½¿ç”¨åœºæ™¯å…¶é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ æ­¤å¤–ï¼ŒGradle å·²ç»æˆä¸º é«˜çº§ Android çŸ¥è¯†ä½“ç³» å¿…ä¸å¯å°‘çš„ä¸€">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05bf4781812d4ab29c34bf9225f57f1b~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78c035e5d3fb4040b7b0959bb5ba235b~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1534456dbf54ceab861a10a4a1e8ecc~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f1b5a1c9e2c64a3da60b79b6d9a1e6a4~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf923fff065c4e5c99693e9a2e311280~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06cfe85b86e14948a3fb7a9119cdaec7~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a018f50e2724dea872463ff07c617d5~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30c70a60ab3d41c79ce5885639ac10de~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6a3173bc747a4868ae47e2ab2a40b921~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/874b6acb92da48b5a4609c98c4359424~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59d0bdd78ad24cb382c1097ace8c7e80~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7a946b452e747f8b616b008fe0ec11d~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b6e3f9f091884174abccc5551ddeb69b~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a17bc09031964a1cb223afeb32a967f4~tplv-k3u1fbpfcp-watermark.awebp">
<meta property="article:published_time" content="2021-11-01T16:00:00.000Z">
<meta property="article:modified_time" content="2021-11-01T16:00:00.000Z">
<meta property="article:author" content="david">
<meta property="article:tag" content="Gradle">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05bf4781812d4ab29c34bf9225f57f1b~tplv-k3u1fbpfcp-watermark.awebp">
  
  

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="Mark" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  

  
</head>

<body>
  


  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    


<header class="header">

<div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.2/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://i.loli.net/2021/09/22/hsX8ka5zQJeGDUb.jpg" onerror="javascript:this.classList.add('error');this.src='https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/image/2659360.svg';"></a><a class="title" href="/"><div class="main">Mark</div><div class="sub normal cap">Daivd</div><div class="sub hover cap" style="opacity:0">angle.lwt@qq.com</div></a></div>
<nav class="menu dis-select"><a class="nav-item active" href="/">åšå®¢</a><a class="nav-item" href="/wiki/">é¡¹ç›®</a><a class="nav-item" href="/notes/">ä¾¿ç¬º</a><a class="nav-item" href="/about/">å…³äºMark</a></nav></header>

<div class="widgets">

<div class="widget-wrap single" id="toc"><div class="widget-header cap dis-select"><span class="name">æœ¬æ–‡ç›®å½•</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Gradle-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">1ã€Gradle æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-Gradle"><span class="toc-text">2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Gradle?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81Gradle-%E7%9A%84%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B"><span class="toc-text">3ã€Gradle çš„æ„å»ºæµç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%8D%87%E7%BA%A7%E6%9C%80%E6%96%B0%E7%9A%84-Gradle-%E7%89%88%E6%9C%AC"><span class="toc-text">1ã€å‡çº§æœ€æ–°çš„ Gradle ç‰ˆæœ¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%BC%80%E5%90%AF%E7%A6%BB%E7%BA%BF%E6%A8%A1%E5%BC%8F"><span class="toc-text">2ã€å¼€å¯ç¦»çº¿æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AE-AS-%E7%9A%84%E6%9C%80%E5%A4%A7%E5%A0%86%E5%86%85%E5%AD%98"><span class="toc-text">3ã€é…ç½® AS çš„æœ€å¤§å †å†…å­˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%88%A0%E9%99%A4%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84-Moudle-%E6%88%96%E5%90%88%E5%B9%B6%E9%83%A8%E5%88%86-Module"><span class="toc-text">4ã€åˆ é™¤ä¸å¿…è¦çš„ Moudle æˆ–åˆå¹¶éƒ¨åˆ† Module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%88%A0%E9%99%A4Module%E4%B8%AD%E7%9A%84%E6%97%A0%E7%94%A8%E6%96%87%E4%BB%B6"><span class="toc-text">5ã€åˆ é™¤Moduleä¸­çš„æ— ç”¨æ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E5%8E%BB%E9%99%A4%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E6%97%A0%E7%94%A8%E8%B5%84%E6%BA%90"><span class="toc-text">6ã€å»é™¤é¡¹ç›®ä¸­çš„æ— ç”¨èµ„æº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E4%BC%98%E5%8C%96%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">7ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E4%BD%BF%E7%94%A8%E6%9B%B4%E5%B0%8F%E7%9A%84%E5%BA%93%E5%8E%BB%E6%9B%BF%E6%8D%A2%E7%8E%B0%E6%9C%89%E7%9A%84%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%B8%89%E6%96%B9%E5%BA%93%E3%80%82"><span class="toc-text">1ï¼‰ã€ä½¿ç”¨æ›´å°çš„åº“å»æ›¿æ¢ç°æœ‰çš„åŒç±»å‹çš„ä¸‰æ–¹åº“ã€‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E4%BD%BF%E7%94%A8-exclude-%E6%9D%A5%E6%8E%92%E9%99%A4%E4%B8%89%E6%96%B9%E5%BA%93%E4%B8%AD%E6%9F%90%E4%BA%9B%E4%B8%8D%E9%9C%80%E8%A6%81%E6%88%96%E8%80%85%E6%98%AF%E9%87%8D%E5%A4%8D%E7%9A%84%E4%BE%9D%E8%B5%96%E3%80%82"><span class="toc-text">2ï¼‰ã€ä½¿ç”¨ exclude æ¥æ’é™¤ä¸‰æ–¹åº“ä¸­æŸäº›ä¸éœ€è¦æˆ–è€…æ˜¯é‡å¤çš„ä¾èµ–ã€‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E3%80%81%E4%BD%BF%E7%94%A8-debugImplementation-%E6%9D%A5%E4%BE%9D%E8%B5%96%E4%BB%85%E5%9C%A8-debug-%E6%9C%9F%E9%97%B4%E6%89%8D%E4%BC%9A%E4%BD%BF%E7%94%A8%E7%9A%84%E5%BA%93%EF%BC%8C%E5%A6%82%E4%B8%80%E4%BA%9B%E7%BA%BF%E4%B8%8B%E7%9A%84%E6%80%A7%E8%83%BD%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%E3%80%82%E5%A6%82%E4%B8%8B%E6%98%AF%E4%B8%80%E4%B8%AA%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-text">3ï¼‰ã€ä½¿ç”¨ debugImplementation æ¥ä¾èµ–ä»…åœ¨ debug æœŸé—´æ‰ä¼šä½¿ç”¨çš„åº“ï¼Œå¦‚ä¸€äº›çº¿ä¸‹çš„æ€§èƒ½æ£€æµ‹å·¥å…·ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E5%88%A9%E7%94%A8%E5%85%AC%E5%8F%B8-Maven-%E4%BB%93%E5%BA%93%E7%9A%84%E6%9C%AC%E5%9C%B0%E7%BC%93%E5%AD%98"><span class="toc-text">8ã€åˆ©ç”¨å…¬å¸ Maven ä»“åº“çš„æœ¬åœ°ç¼“å­˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81Debug-%E6%9E%84%E5%BB%BA%E6%97%B6%E8%AE%BE%E7%BD%AE-minSdkVersion-%E4%B8%BA-21"><span class="toc-text">9ã€Debug æ„å»ºæ—¶è®¾ç½® minSdkVersion ä¸º 21</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81%E9%85%8D%E7%BD%AE-gradle-properties"><span class="toc-text">10ã€é…ç½® gradle.properties</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%81%E9%85%8D%E7%BD%AE-DexOptions"><span class="toc-text">11ã€é…ç½® DexOptions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%81%E4%BD%BF%E7%94%A8-walle-%E6%8F%90%E5%8D%87%E6%89%93%E5%A4%9A%E6%B8%A0%E9%81%93%E5%8C%85%E7%9A%84%E6%95%88%E7%8E%87"><span class="toc-text">12ã€ä½¿ç”¨ walle æå‡æ‰“å¤šæ¸ é“åŒ…çš„æ•ˆç‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E3%80%81%E8%AE%BE%E7%BD%AE%E5%BA%94%E7%94%A8%E6%94%AF%E6%8C%81%E7%9A%84%E8%AF%AD%E8%A8%80"><span class="toc-text">13ã€è®¾ç½®åº”ç”¨æ”¯æŒçš„è¯­è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E3%80%81%E4%BD%BF%E7%94%A8%E5%A2%9E%E9%87%8F%E7%BC%96%E8%AF%91"><span class="toc-text">14ã€ä½¿ç”¨å¢é‡ç¼–è¯‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15%E3%80%81%E4%BD%BF%E7%94%A8%E5%BE%AA%E7%8E%AF%E8%BF%9B%E8%A1%8C%E4%BE%9D%E8%B5%96%E4%BC%98%E5%8C%96%EF%BC%88%F0%9F%94%A5%EF%BC%89"><span class="toc-text">15ã€ä½¿ç”¨å¾ªç¯è¿›è¡Œä¾èµ–ä¼˜åŒ–ï¼ˆğŸ”¥ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Gradle-%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4"><span class="toc-text">1ã€Gradle æŸ¥è¯¢å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E6%9F%A5%E7%9C%8B%E4%B8%BB%E8%A6%81%E4%BB%BB%E5%8A%A1"><span class="toc-text">1ï¼‰ã€æŸ¥çœ‹ä¸»è¦ä»»åŠ¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E4%BB%BB%E5%8A%A1%EF%BC%8C%E5%8C%85%E6%8B%AC%E7%BC%93%E5%AD%98%E4%BB%BB%E5%8A%A1%E7%AD%89%E7%AD%89"><span class="toc-text">2ï¼‰ã€æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬ç¼“å­˜ä»»åŠ¡ç­‰ç­‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Gradle-%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-text">2ã€Gradle æ‰§è¡Œå‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E5%AF%B9%E6%9F%90%E4%B8%AAmodule-moduleName-%E7%9A%84%E6%9F%90%E4%B8%AA%E4%BB%BB%E5%8A%A1-TaskName-%E8%BF%90%E8%A1%8C"><span class="toc-text">1ï¼‰ã€å¯¹æŸä¸ªmodule [moduleName]   çš„æŸä¸ªä»»åŠ¡[TaskName] è¿è¡Œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81Gradle-%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BA%E5%91%BD%E4%BB%A4"><span class="toc-text">3ã€Gradle å¿«é€Ÿæ„å»ºå‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E6%9F%A5%E7%9C%8B%E6%9E%84%E5%BB%BA%E7%89%88%E6%9C%AC"><span class="toc-text">1ï¼‰ã€æŸ¥çœ‹æ„å»ºç‰ˆæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E6%B8%85%E9%99%A4-build-%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">2ï¼‰ã€æ¸…é™¤ build æ–‡ä»¶å¤¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E3%80%81%E6%A3%80%E6%9F%A5%E4%BE%9D%E8%B5%96%E5%B9%B6%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85"><span class="toc-text">3ï¼‰ã€æ£€æŸ¥ä¾èµ–å¹¶ç¼–è¯‘æ‰“åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%89%E3%80%81%E7%BC%96%E8%AF%91%E5%B9%B6%E5%AE%89%E8%A3%85-debug-%E5%8C%85"><span class="toc-text">4ï¼‰ã€ç¼–è¯‘å¹¶å®‰è£… debug åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%89%E3%80%81%E7%BC%96%E8%AF%91%E5%B9%B6%E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97"><span class="toc-text">5ï¼‰ã€ç¼–è¯‘å¹¶æ‰“å°æ—¥å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%EF%BC%89%E3%80%81%E7%BC%96%E8%AF%91%E5%B9%B6%E8%BE%93%E5%87%BA%E6%80%A7%E8%83%BD%E6%8A%A5%E5%91%8A%EF%BC%8C%E6%80%A7%E8%83%BD%E6%8A%A5%E5%91%8A%E4%B8%80%E8%88%AC%E5%9C%A8%E6%9E%84%E5%BB%BA%E5%B7%A5%E7%A8%8B%E6%A0%B9%E7%9B%AE%E5%BD%95-build-reports-profile-%E4%B8%8B"><span class="toc-text">6ï¼‰ã€ç¼–è¯‘å¹¶è¾“å‡ºæ€§èƒ½æŠ¥å‘Šï¼Œæ€§èƒ½æŠ¥å‘Šä¸€èˆ¬åœ¨æ„å»ºå·¥ç¨‹æ ¹ç›®å½• build&#x2F;reports&#x2F;profile ä¸‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%EF%BC%89%E3%80%81%E8%B0%83%E8%AF%95%E6%A8%A1%E5%BC%8F%E6%9E%84%E5%BB%BA%E5%B9%B6%E6%89%93%E5%8D%B0%E5%A0%86%E6%A0%88%E6%97%A5%E5%BF%97"><span class="toc-text">7ï¼‰ã€è°ƒè¯•æ¨¡å¼æ„å»ºå¹¶æ‰“å°å †æ ˆæ—¥å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%EF%BC%89%E3%80%81%E5%BC%BA%E5%88%B6%E6%9B%B4%E6%96%B0%E6%9C%80%E6%96%B0%E4%BE%9D%E8%B5%96%EF%BC%8C%E6%B8%85%E9%99%A4%E6%9E%84%E5%BB%BA%E5%90%8E%E5%86%8D%E6%9E%84%E5%BB%BA"><span class="toc-text">8ï¼‰ã€å¼ºåˆ¶æ›´æ–°æœ€æ–°ä¾èµ–ï¼Œæ¸…é™¤æ„å»ºåå†æ„å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%EF%BC%89%E3%80%81%E7%BC%96%E8%AF%91%E5%B9%B6%E6%89%93-Debug-%E5%8C%85"><span class="toc-text">9ï¼‰ã€ç¼–è¯‘å¹¶æ‰“ Debug åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%EF%BC%89%E3%80%81%E7%BC%96%E8%AF%91%E5%B9%B6%E6%89%93-Release-%E7%9A%84%E5%8C%85"><span class="toc-text">10ï¼‰ã€ç¼–è¯‘å¹¶æ‰“ Release çš„åŒ…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81Gradle-%E6%9E%84%E5%BB%BA%E5%B9%B6%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4"><span class="toc-text">4ã€Gradle æ„å»ºå¹¶å®‰è£…å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81Release-%E6%A8%A1%E5%BC%8F%E6%89%93%E5%8C%85%E5%B9%B6%E5%AE%89%E8%A3%85"><span class="toc-text">1ï¼‰ã€Release æ¨¡å¼æ‰“åŒ…å¹¶å®‰è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E5%8D%B8%E8%BD%BD-Release-%E6%A8%A1%E5%BC%8F%E5%8C%85"><span class="toc-text">2ï¼‰ã€å¸è½½ Release æ¨¡å¼åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E3%80%81debug-release-%E6%A8%A1%E5%BC%8F%E5%85%A8%E9%83%A8%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85"><span class="toc-text">3ï¼‰ã€debug release æ¨¡å¼å…¨éƒ¨æ¸ é“æ‰“åŒ…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81Gradle-%E6%9F%A5%E7%9C%8B%E5%8C%85%E4%BE%9D%E8%B5%96%E5%91%BD%E4%BB%A4"><span class="toc-text">5ã€Gradle æŸ¥çœ‹åŒ…ä¾èµ–å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81%E6%9F%A5%E7%9C%8B%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-text">1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81%E6%9F%A5%E7%9C%8B-app-%E6%A8%A1%E5%9D%97%E4%B8%8B%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-text">2ï¼‰ã€æŸ¥çœ‹ app æ¨¡å—ä¸‹çš„ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E3%80%81%E6%9F%A5%E7%9C%8B-app-%E6%A8%A1%E5%9D%97%E4%B8%8B%E5%8C%85%E5%90%AB-implementation-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BE%9D%E8%B5%96%E9%A1%B9%E7%9B%AE"><span class="toc-text">3ï¼‰ã€æŸ¥çœ‹ app æ¨¡å—ä¸‹åŒ…å« implementation å…³é”®å­—çš„ä¾èµ–é¡¹ç›®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Profile-report"><span class="toc-text">1ã€Profile report</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E3%80%81Summary"><span class="toc-text">1ï¼‰ã€Summary</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E3%80%81Configuaration"><span class="toc-text">2ï¼‰ã€Configuaration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E3%80%81Dependency-Resolution"><span class="toc-text">3ï¼‰ã€Dependency Resolution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%89%E3%80%81Task-Execution"><span class="toc-text">4ï¼‰ã€Task Execution</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Build-Scan"><span class="toc-text">2ã€Build Scan</span></a></li></ol></div></div></div>


</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" title="GitHub" href="https://github.com/liwentuo" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.3/social/08a41b181ce68.svg"/></a><a class="social" title="Unsplash" href="https://unsplash.com/@angledaivd" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.3/social/3616429.svg"/></a><a class="social" title="Comments" href="/about/#comments" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.3/social/942ebbf1a4b91.svg"/></a></div></footer>

    </aside>
    <div class='l_main'>
      

      


<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">Mark</a><span class="sep"></span><a class="cap breadcrumb" href="/">æ–‡ç« </a><span class="sep"></span><a class="cap breadcrumb-link" href="/blog/categories/gradle/">Gradle</a></div><div id="post-meta">å‘å¸ƒäº&nbsp;<time datetime="2021-11-01T16:00:00.000Z">2021å¹´11æœˆ2æ—¥</time></div></div>

<article class='content md post'>
<h1 class="article-title"><span>é‡æ‹¾Gradle</span></h1>
<p><strong>å·¥ç¨‹æ„å»ºå·¥å…·ä»å¤è€çš„ mkã€makeã€cmakeã€qmake, å†åˆ°æˆç†Ÿçš„ antã€mavenã€ivyï¼Œæœ€ååˆ°å¦‚ä»Šäº’è”ç½‘æ—¶ä»£çš„ sbtã€gradleï¼Œç»å†äº†é•¿ä¹…çš„å†å²æ¼”åŒ–ä¸å˜è¿</strong>ã€‚</p>
<p>Gradle ä½œä¸ºä¸€æ¬¾æ–°ç”Ÿä»£çš„æ„å»ºå·¥å…·æ— ç–‘æ˜¯æœ‰å®ƒè‡ªèº«çš„å·¨å¤§ä¼˜åŠ¿çš„ï¼Œ<strong>å› æ­¤ï¼ŒæŒæ¡å¥½ Gradle æ„å»ºå·¥å…·çš„å„ç§ä½¿ç”¨å§¿åŠ¿ä¸ä½¿ç”¨åœºæ™¯å…¶é‡è¦æ€§ä¸è¨€è€Œå–»</strong>ã€‚</p>
<p>æ­¤å¤–ï¼Œ<strong>Gradle</strong> å·²ç»æˆä¸º <strong>é«˜çº§ Android çŸ¥è¯†ä½“ç³»</strong> å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼ŒæŒæ¡ Gradleï¼Œæå‡è‡ªèº« <strong>è‡ªåŠ¨åŒ–æ„å»ºæŠ€æœ¯çš„æ·±åº¦</strong>ï¼Œ èƒ½è®©æˆ‘ä»¬æ›´åŠ åœ° <strong>å¦‚è™æ·»ç¿¼</strong>ã€‚</p>
<h2 id="1ã€Gradle-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1ã€Gradle-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1ã€Gradle æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1ã€Gradle æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul>
<li>1)ã€å®ƒæ˜¯ä¸€æ¬¾å¼ºå¤§çš„æ„å»ºå·¥å…·ï¼Œè€Œä¸æ˜¯è¯­â¾”ã€‚</li>
<li>2)ã€å®ƒä½¿ç”¨äº† Groovy è¿™ä¸ªè¯­è¨€ï¼Œåˆ›é€ äº†ä¸€ç§ DSLï¼Œä½†å®ƒæœ¬èº«ä¸æ˜¯è¯­â¾”ã€‚</li>
</ul>
<h2 id="2ã€ä¸ºä»€ä¹ˆä½¿ç”¨-Gradle"><a href="#2ã€ä¸ºä»€ä¹ˆä½¿ç”¨-Gradle" class="headerlink" title="2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Gradle?"></a>2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Gradle?</h2><p>ä¸»è¦åŸºäºå¦‚ä¸‹ ä¸‰ç‚¹ åŸå› ï¼š</p>
<ul>
<li>1ï¼‰ã€å®ƒæ˜¯ä¸€æ¬¾æœ€æ–°çš„ï¼ŒåŠŸèƒ½æœ€å¼ºå¤§çš„æ„å»ºå·¥å…·ï¼Œä½¿ç”¨å®ƒæˆ‘ä»¬èƒ½åšå¾ˆå¤šäº‹æƒ…ã€‚</li>
<li>2ï¼‰ã€ä½¿ç”¨ç¨‹åºæ›¿ä»£ä¼ ç»Ÿçš„ XML é…ç½®ï¼Œä½¿å¾—é¡¹ç›®æ„å»ºæ›´åŠ çµæ´»ã€‚</li>
<li>3ï¼‰ã€ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¯ä»¥è®©æˆ‘ä»¬éšå¿ƒæ‰€æ¬²åœ°ä½¿ç”¨ã€‚</li>
</ul>
<h2 id="3ã€Gradle-çš„æ„å»ºæµç¨‹"><a href="#3ã€Gradle-çš„æ„å»ºæµç¨‹" class="headerlink" title="3ã€Gradle çš„æ„å»ºæµç¨‹"></a>3ã€Gradle çš„æ„å»ºæµç¨‹</h2><p>é€šå¸¸æ¥è¯´ï¼ŒGradle ä¸€æ¬¡å®Œæ•´çš„æ„å»ºè¿‡ç¨‹é€šå¸¸åˆ†æˆå¦‚ä¸‹ ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>åˆå§‹åŒ–é˜¶æ®µï¼šé¦–å…ˆï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µ Gradle ä¼šå†³å®šå“ªäº›é¡¹ç›®æ¨¡å—è¦å‚ä¸æ„å»ºï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªé¡¹ç›®æ¨¡å—åˆ›å»ºä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ Project å®ä¾‹ã€‚</li>
<li>é…ç½®é˜¶æ®µï¼šç„¶åï¼Œé…ç½®å·¥ç¨‹ä¸­æ¯ä¸ªé¡¹ç›®çš„æ¨¡å—ï¼Œå¹¶æ‰§è¡ŒåŒ…å«å…¶ä¸­çš„é…ç½®è„šæœ¬ã€‚</li>
<li>ä»»åŠ¡æ‰§è¡Œï¼šæœ€åï¼Œæ‰§è¡Œæ¯ä¸ªå‚ä¸æ„å»ºè¿‡ç¨‹çš„ Gradle taskã€‚</li>
</ul>
<h1 id="äºŒã€æ‰“åŒ…æé€Ÿ"><a href="#äºŒã€æ‰“åŒ…æé€Ÿ" class="headerlink" title="äºŒã€æ‰“åŒ…æé€Ÿ"></a>äºŒã€æ‰“åŒ…æé€Ÿ</h1><p>æŒæ¡ Gradle æ„å»ºæé€Ÿçš„æŠ€å·§èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬èŠ‚çœå¤§é‡çš„ç¼–è¯‘æ„å»ºæ—¶é—´ï¼Œå¹¶ä¸”ï¼Œä¾èµ–æ¨¡å—è¶Šå¤šä¸”è¶Šå¤§çš„é¡¹ç›®èŠ‚çœå‡ºæ¥çš„æ—¶é—´è¶Šå¤šï¼Œå› æ­¤æ˜¯ä¸€ä»¶æŠ•å…¥äº§å‡ºæ¯”ç›¸å½“å¤§çš„äº‹æƒ…ã€‚</p>
<h2 id="1ã€å‡çº§æœ€æ–°çš„-Gradle-ç‰ˆæœ¬"><a href="#1ã€å‡çº§æœ€æ–°çš„-Gradle-ç‰ˆæœ¬" class="headerlink" title="1ã€å‡çº§æœ€æ–°çš„ Gradle ç‰ˆæœ¬"></a>1ã€å‡çº§æœ€æ–°çš„ Gradle ç‰ˆæœ¬</h2><p>å°† Gradle å’Œ Android Gradle Plugin çš„ç‰ˆæœ¬å‡è‡³æœ€æ–°ï¼Œæ‰€å¸¦æ¥çš„çš„æ„å»ºé€Ÿåº¦çš„æå‡æ•ˆæœæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œç‰¹åˆ«æ˜¯å½“ä¹‹å‰ä½ æ‰€ä½¿ç”¨çš„ç‰ˆæœ¬å¾ˆä½çš„æ—¶å€™ã€‚</p>
<h2 id="2ã€å¼€å¯ç¦»çº¿æ¨¡å¼"><a href="#2ã€å¼€å¯ç¦»çº¿æ¨¡å¼" class="headerlink" title="2ã€å¼€å¯ç¦»çº¿æ¨¡å¼"></a>2ã€å¼€å¯ç¦»çº¿æ¨¡å¼</h2><p>æ‰“å¼€ Android Studio çš„ç¦»çº¿æ¨¡å¼åï¼Œæ‰€æœ‰çš„ç¼–è¯‘æ“ä½œéƒ½ä¼šèµ°æœ¬åœ°ç¼“å­˜ï¼Œæ¯«æ— ç–‘é—®ï¼Œè¿™å°†ä¼šæå¤§åœ°ç¼©çŸ­ç¼–è¯‘æ—¶é—´ã€‚</p>
<h2 id="3ã€é…ç½®-AS-çš„æœ€å¤§å †å†…å­˜"><a href="#3ã€é…ç½®-AS-çš„æœ€å¤§å †å†…å­˜" class="headerlink" title="3ã€é…ç½® AS çš„æœ€å¤§å †å†…å­˜"></a>3ã€é…ç½® AS çš„æœ€å¤§å †å†…å­˜</h2><p><strong>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ AS çš„æœ€å¤§å †å†…å­˜ä¸º 1960MBï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© Help =&gt; Edit Custom VM Optionsï¼Œæ­¤æ—¶ï¼Œä¼šæ‰“å¼€ä¸€ä¸ª studio.vmoptions æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†ç¬¬äºŒè¡Œçš„ -Xmx1960m æ”¹ä¸º -Xmx3g å³å¯å°†å¯ç”¨å†…å­˜æå‡åˆ° 3GB</strong>ã€‚</p>
<h2 id="4ã€åˆ é™¤ä¸å¿…è¦çš„-Moudle-æˆ–åˆå¹¶éƒ¨åˆ†-Module"><a href="#4ã€åˆ é™¤ä¸å¿…è¦çš„-Moudle-æˆ–åˆå¹¶éƒ¨åˆ†-Module" class="headerlink" title="4ã€åˆ é™¤ä¸å¿…è¦çš„ Moudle æˆ–åˆå¹¶éƒ¨åˆ† Module"></a>4ã€åˆ é™¤ä¸å¿…è¦çš„ Moudle æˆ–åˆå¹¶éƒ¨åˆ† Module</h2><p>è¿‡å¤šçš„ Moudle ä¼šä½¿é¡¹ç›®ä¸­ Module çš„ä¾èµ–å…³ç³»å˜å¾—å¤æ‚ï¼ŒGradle åœ¨ç¼–è¯‘æ„å»ºçš„æ—¶å€™ä¼šå»æ£€æµ‹å„ä¸ª Module ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç„¶åï¼Œå®ƒä¼šèŠ±è´¹å¤§é‡çš„æ„å»ºæ—¶é—´å¸®æˆ‘ä»¬æ¢³ç†è¿™äº› Module ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥é¿å… Module ä¹‹é—´ç›¸äº’å¼•ç”¨è€Œå¸¦æ¥çš„å„ç§é—®é¢˜ã€‚<strong>é™¤äº†åˆ é™¤ä¸å¿…è¦çš„ Moudle æˆ–åˆå¹¶éƒ¨åˆ† Module çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ç¨³å®šçš„åº•å±‚ Module æ‰“åŒ…æˆ aarï¼Œä¸Šä¼ åˆ°å…¬å¸çš„æœ¬åœ° Maven ä»“åº“ï¼Œé€šè¿‡è¿œç¨‹æ–¹å¼ä¾èµ–</strong>ã€‚</p>
<h2 id="5ã€åˆ é™¤Moduleä¸­çš„æ— ç”¨æ–‡ä»¶"><a href="#5ã€åˆ é™¤Moduleä¸­çš„æ— ç”¨æ–‡ä»¶" class="headerlink" title="5ã€åˆ é™¤Moduleä¸­çš„æ— ç”¨æ–‡ä»¶"></a>5ã€åˆ é™¤Moduleä¸­çš„æ— ç”¨æ–‡ä»¶</h2><ul>
<li>1ï¼‰ã€å¦‚æœæˆ‘ä»¬ä¸éœ€è¦å†™å•å…ƒæµ‹è¯•ä»£ç ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤ test ç›®å½•ã€‚</li>
<li>2ï¼‰ã€å¦‚æœæˆ‘ä»¬ä¸éœ€è¦å†™ UI æµ‹è¯•ä»£ç ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ é™¤ androidTest ç›®å½•ã€‚</li>
<li>3ï¼‰ã€æ­¤å¤–ï¼Œå¦‚æœ Moudle ä¸­åªæœ‰çº¯ä»£ç ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤ res ç›®å½•ã€‚</li>
</ul>
<h2 id="6ã€å»é™¤é¡¹ç›®ä¸­çš„æ— ç”¨èµ„æº"><a href="#6ã€å»é™¤é¡¹ç›®ä¸­çš„æ— ç”¨èµ„æº" class="headerlink" title="6ã€å»é™¤é¡¹ç›®ä¸­çš„æ— ç”¨èµ„æº"></a>6ã€å»é™¤é¡¹ç›®ä¸­çš„æ— ç”¨èµ„æº</h2><p>åœ¨ Android Studio ä¸­æä¾›äº†ä¾›äº†è‡ªåŠ¨æ£€æµ‹å¤±æ•ˆæ–‡ä»¶å’Œåˆ é™¤çš„åŠŸèƒ½ï¼Œå³ <strong>Remove Unused Resource</strong> åŠŸèƒ½ï¼Œæ“ä½œè·¯å¾„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<blockquote>
<p>å³é”® =&gt; é€‰ä¸­ Refactor =&gt; é€‰ä¸­Remove Unused Resource =&gt; ç›´æ¥ç‚¹å‡»REFACTOR</p>
</blockquote>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¸éœ€è¦å°† Delete unused @id declarations too é€‰ä¸­ï¼Œå¦‚æœä½ ä½¿ç”¨äº† databinding çš„è¯ï¼Œå¯èƒ½ä¼šç¼–è¯‘å¤±è´¥</strong>ã€‚</p>
<h2 id="7ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨"><a href="#7ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨" class="headerlink" title="7ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨"></a>7ã€ä¼˜åŒ–ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨</h2><p>ä¸€èˆ¬çš„ä¼˜åŒ–æ­¥éª¤æœ‰å¦‚ä¸‹ ä¸‰æ­¥ï¼š</p>
<h3 id="1ï¼‰ã€ä½¿ç”¨æ›´å°çš„åº“å»æ›¿æ¢ç°æœ‰çš„åŒç±»å‹çš„ä¸‰æ–¹åº“ã€‚"><a href="#1ï¼‰ã€ä½¿ç”¨æ›´å°çš„åº“å»æ›¿æ¢ç°æœ‰çš„åŒç±»å‹çš„ä¸‰æ–¹åº“ã€‚" class="headerlink" title="1ï¼‰ã€ä½¿ç”¨æ›´å°çš„åº“å»æ›¿æ¢ç°æœ‰çš„åŒç±»å‹çš„ä¸‰æ–¹åº“ã€‚"></a>1ï¼‰ã€ä½¿ç”¨æ›´å°çš„åº“å»æ›¿æ¢ç°æœ‰çš„åŒç±»å‹çš„ä¸‰æ–¹åº“ã€‚</h3><h3 id="2ï¼‰ã€ä½¿ç”¨-exclude-æ¥æ’é™¤ä¸‰æ–¹åº“ä¸­æŸäº›ä¸éœ€è¦æˆ–è€…æ˜¯é‡å¤çš„ä¾èµ–ã€‚"><a href="#2ï¼‰ã€ä½¿ç”¨-exclude-æ¥æ’é™¤ä¸‰æ–¹åº“ä¸­æŸäº›ä¸éœ€è¦æˆ–è€…æ˜¯é‡å¤çš„ä¾èµ–ã€‚" class="headerlink" title="2ï¼‰ã€ä½¿ç”¨ exclude æ¥æ’é™¤ä¸‰æ–¹åº“ä¸­æŸäº›ä¸éœ€è¦æˆ–è€…æ˜¯é‡å¤çš„ä¾èµ–ã€‚"></a>2ï¼‰ã€ä½¿ç”¨ exclude æ¥æ’é™¤ä¸‰æ–¹åº“ä¸­æŸäº›ä¸éœ€è¦æˆ–è€…æ˜¯é‡å¤çš„ä¾èµ–ã€‚</h3><p>ä¾‹å¦‚ï¼Œæˆ‘åœ¨ <a href="https://link.juejin.cn/?target=https://github.com/JsonChao/Awesome-WanAndroid">Awesome-WanAndroid</a> é¡¹ç›®ä¸­å°±ä½¿ç”¨åˆ°äº†è¿™ç§æŠ€å·§ï¼Œåœ¨ä¾èµ– LeakCanary æ—¶ï¼Œå‘ç°å®ƒåŒ…å«æœ‰ support åŒ…ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ exclude å°†å®ƒæ’é™¤æ‰ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   debugImplementation (rootProject.ext.dependencies[<span class="string">&quot;leakcanary-android&quot;</span>]) &#123;</span><br><span class="line">       exclude group: <span class="string">&#x27;com.android.support&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line">   releaseImplementation (rootProject.ext.dependencies[<span class="string">&quot;leakcanary-android-no-op&quot;</span>]) &#123;</span><br><span class="line">       exclude group: <span class="string">&#x27;com.android.support&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line">   testImplementation (rootProject.ext.dependencies[<span class="string">&quot;leakcanary-android-no-op&quot;</span>]) &#123;</span><br><span class="line">       exclude group: <span class="string">&#x27;com.android.support&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="3ï¼‰ã€ä½¿ç”¨-debugImplementation-æ¥ä¾èµ–ä»…åœ¨-debug-æœŸé—´æ‰ä¼šä½¿ç”¨çš„åº“ï¼Œå¦‚ä¸€äº›çº¿ä¸‹çš„æ€§èƒ½æ£€æµ‹å·¥å…·ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š"><a href="#3ï¼‰ã€ä½¿ç”¨-debugImplementation-æ¥ä¾èµ–ä»…åœ¨-debug-æœŸé—´æ‰ä¼šä½¿ç”¨çš„åº“ï¼Œå¦‚ä¸€äº›çº¿ä¸‹çš„æ€§èƒ½æ£€æµ‹å·¥å…·ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š" class="headerlink" title="3ï¼‰ã€ä½¿ç”¨ debugImplementation æ¥ä¾èµ–ä»…åœ¨ debug æœŸé—´æ‰ä¼šä½¿ç”¨çš„åº“ï¼Œå¦‚ä¸€äº›çº¿ä¸‹çš„æ€§èƒ½æ£€æµ‹å·¥å…·ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š"></a>3ï¼‰ã€ä½¿ç”¨ debugImplementation æ¥ä¾èµ–ä»…åœ¨ debug æœŸé—´æ‰ä¼šä½¿ç”¨çš„åº“ï¼Œå¦‚ä¸€äº›çº¿ä¸‹çš„æ€§èƒ½æ£€æµ‹å·¥å…·ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»…åœ¨debugåŒ…å¯ç”¨BlockCanaryè¿›è¡Œå¡é¡¿ç›‘æ§å’Œæç¤ºçš„è¯ï¼Œå¯ä»¥è¿™ä¹ˆç”¨</span></span><br><span class="line">debugImplementation <span class="string">&#x27;com.github.markzhai:blockcanary-android:1.5.0&#x27;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="8ã€åˆ©ç”¨å…¬å¸-Maven-ä»“åº“çš„æœ¬åœ°ç¼“å­˜"><a href="#8ã€åˆ©ç”¨å…¬å¸-Maven-ä»“åº“çš„æœ¬åœ°ç¼“å­˜" class="headerlink" title="8ã€åˆ©ç”¨å…¬å¸ Maven ä»“åº“çš„æœ¬åœ°ç¼“å­˜"></a>8ã€åˆ©ç”¨å…¬å¸ Maven ä»“åº“çš„æœ¬åœ°ç¼“å­˜</h2><p>å½“ç¬¬ä¸€ä¸ªå¼€å‘å¼•å…¥äº†æ–°åº“æˆ–è€…æ›´æ–°ç‰ˆæœ¬ä¹‹åï¼Œå…¬å¸çš„ Maven ä»“åº“ä¸­å°±ä¼šç¼“å­˜å¯¹åº”çš„åº“ç‰ˆæœ¬ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œå…¶ä»–å¼€å‘åŒäº‹å°±èƒ½å¤Ÿåœ¨é¡¹ç›®æ„å»ºæ—¶ç›´æ¥ä»å…¬å¸çš„ Maven ä»“åº“ä¸­æ‹¿åˆ°ç¼“å­˜ã€‚</p>
<h2 id="9ã€Debug-æ„å»ºæ—¶è®¾ç½®-minSdkVersion-ä¸º-21"><a href="#9ã€Debug-æ„å»ºæ—¶è®¾ç½®-minSdkVersion-ä¸º-21" class="headerlink" title="9ã€Debug æ„å»ºæ—¶è®¾ç½® minSdkVersion ä¸º 21"></a>9ã€Debug æ„å»ºæ—¶è®¾ç½® minSdkVersion ä¸º 21</h2><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é¿å…å› ä½¿ç”¨ MutliDex è€Œæ‹–æ…¢ build é€Ÿåº¦ã€‚åœ¨ä¸» Moudle ä¸­çš„ build.gradle ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    productFlavors &#123;</span><br><span class="line">        speed &#123;</span><br><span class="line">            minSdkVersion <span class="number">21</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>åŒæ­¥é¡¹ç›®ä¹‹åï¼Œæˆ‘ä»¬åœ¨Android Studioå³ä¾§çš„ Build Variants ä¸­é€‰ä¸­ speedDebug é€‰é¡¹å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05bf4781812d4ab29c34bf9225f57f1b~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦æ³¨æ„æˆ‘ä»¬å½“å‰é¡¹ç›®çš„å®é™…æœ€ä½ç‰ˆæœ¬ï¼Œæ¯”å¦‚å®ƒä¸º 18ï¼Œç°åœ¨æˆ‘ä»¬å¼€å¯äº† speedDebugï¼Œé¡¹ç›®ç¼–å†™æ—¶å°±ä¼šä»¥ 21 ä¸ºæ ‡å‡†ï¼Œæ­¤æ—¶ï¼Œå°± <strong>éœ€è¦æ³¨æ„ 18 ~ 21 ä¹‹é—´çš„ API</strong>ï¼Œä¾‹å¦‚æˆ‘åœ¨å¸ƒå±€ä¸­ä½¿ç”¨äº† 21 ç‰ˆæœ¬æ–°å‡ºçš„ Material Design çš„æ§ä»¶ï¼Œæ­¤æ—¶å°±æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†å®é™…æˆ‘ä»¬éœ€è¦å¯¹ 21 ç‰ˆæœ¬ä»¥ä¸‹çš„å¯¹åº”å¸ƒå±€åšç›¸åº”çš„é€‚é…ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ä¸åŒçš„ productFlavorsï¼Œå¹¶ä¸”åœ¨ src ç›®å½•ä¸‹æ–°å»ºå¯¹åº”çš„ flavor åç§°æ ‡è¯†çš„ç›®å½•èµ„æºæ–‡ä»¶ï¼Œä»¥æ­¤å®ç°åœ¨ä¸åŒçš„æ¸ é“ APK ä¸­é‡‡ç”¨ä¸åŒçš„èµ„æºæ–‡ä»¶ã€‚</p>
<h2 id="10ã€é…ç½®-gradle-properties"><a href="#10ã€é…ç½®-gradle-properties" class="headerlink" title="10ã€é…ç½® gradle.properties"></a>10ã€é…ç½® gradle.properties</h2><p>é€šç”¨çš„é…ç½®é¡¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="comment">// æ„å»ºåˆå§‹åŒ–éœ€è¦æ‰§è¡Œè®¸å¤šä»»åŠ¡ï¼Œä¾‹å¦‚javaè™šæ‹Ÿæœºçš„å¯åŠ¨ï¼ŒåŠ è½½è™šæ‹Ÿæœºç¯å¢ƒï¼ŒåŠ è½½classæ–‡ä»¶ç­‰ç­‰ï¼Œé…ç½®æ­¤é¡¹å¯ä»¥å¼€å¯çº¿ç¨‹å®ˆæŠ¤ï¼Œå¹¶ä¸”ä»…ä»…ç¬¬ä¸€æ¬¡ç¼–è¯‘æ—¶ä¼šå¼€å¯çº¿ç¨‹ï¼ˆGradle 3.0ç‰ˆæœ¬ä»¥åé»˜è®¤æ”¯æŒï¼‰</span></span><br><span class="line">    org.gradle.daemon=<span class="keyword">true</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é…ç½®ç¼–è¯‘æ—¶çš„è™šæ‹Ÿæœºå¤§å°</span></span><br><span class="line">    org.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-<span class="number">8</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¼€å¯å¹¶è¡Œç¼–è¯‘ï¼Œç›¸å½“ä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼Œä»…ä»…é€‚ç”¨äºæ¨¡å—åŒ–é¡¹ç›®ï¼ˆå­˜åœ¨å¤šä¸ª Library åº“å·¥ç¨‹ä¾èµ–ä¸»å·¥ç¨‹ï¼‰</span></span><br><span class="line">    org.gradle.parallel=<span class="keyword">true</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºå¸®åŠ©å¤š Moudle çš„å·¥ç¨‹æé€Ÿï¼Œåœ¨ç¼–è¯‘å¤šä¸ª Module ç›¸äº’ä¾èµ–çš„é¡¹ç›®æ—¶ï¼ŒGradle ä¼šæŒ‰éœ€é€‰æ‹©è¿›è¡Œç¼–è¯‘ï¼Œå³ä»…ä»…ç¼–è¯‘ç›¸å…³çš„ Module</span></span><br><span class="line">    org.gradle.configureondemand=<span class="keyword">true</span>   </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¼€å¯æ„å»ºç¼“å­˜ï¼ŒGradle 3.5æ–°çš„ç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥ç¼“å­˜æ‰€æœ‰ä»»åŠ¡çš„è¾“å‡ºï¼Œ</span></span><br><span class="line">    <span class="comment">// ä¸åŒäºbuildCacheä»…ä»…ç¼“å­˜dexçš„å¤–éƒ¨libsï¼Œå®ƒå¯ä»¥å¤ç”¨</span></span><br><span class="line">    <span class="comment">// ä»»ä½•æ—¶å€™çš„æ„å»ºç¼“å­˜ï¼Œè®¾ç½®åŒ…æ‹¬å…¶å®ƒåˆ†æ”¯çš„æ„å»ºç¼“å­˜</span></span><br><span class="line">    org.gradle.caching=<span class="keyword">true</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ•ˆæœæ¯”è¾ƒå¥½ä¸€ç‚¹çš„é…ç½®é¡¹å°±æ˜¯ <strong>é…ç½®ç¼–è¯‘æ—¶çš„è™šæ‹Ÿæœºå¤§å°</strong> è¿™é¡¹ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†åˆ†æä¸‹å…¶ä¸­å‚æ•°çš„å«ä¹‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>-Xmx2048mï¼šæŒ‡å®š JVM æœ€å¤§å…è®¸åˆ†é…çš„å †å†…å­˜ä¸º 2048MBï¼Œå®ƒä¼šé‡‡ç”¨æŒ‰éœ€åˆ†é…çš„æ–¹å¼ã€‚</li>
<li>-XX:MaxPermSize=512mï¼šæŒ‡å®š JVM æœ€å¤§å…è®¸åˆ†é…çš„éå †å†…å­˜ä¸º 512MBï¼ŒåŒä¸Šå †å†…å­˜ä¸€æ ·ä¹Ÿæ˜¯æŒ‰éœ€åˆ†é…çš„ã€‚</li>
</ul>
<h2 id="11ã€é…ç½®-DexOptions"><a href="#11ã€é…ç½®-DexOptions" class="headerlink" title="11ã€é…ç½® DexOptions"></a>11ã€é…ç½® DexOptions</h2><p>æˆ‘ä»¬å¯ä»¥å°† dexOptions é…ç½®é¡¹ä¸­çš„ maxProcessCount è®¾å®šä¸º 8ï¼Œè¿™æ ·ç¼–è¯‘æ—¶å¹¶è¡Œçš„æœ€å¤§è¿›ç¨‹æ•°æ•°ç›®å°±å¯ä»¥æå‡åˆ° 8 ä¸ªã€‚</p>
<h2 id="12ã€ä½¿ç”¨-walle-æå‡æ‰“å¤šæ¸ é“åŒ…çš„æ•ˆç‡"><a href="#12ã€ä½¿ç”¨-walle-æå‡æ‰“å¤šæ¸ é“åŒ…çš„æ•ˆç‡" class="headerlink" title="12ã€ä½¿ç”¨ walle æå‡æ‰“å¤šæ¸ é“åŒ…çš„æ•ˆç‡"></a>12ã€ä½¿ç”¨ walle æå‡æ‰“å¤šæ¸ é“åŒ…çš„æ•ˆç‡</h2><p>walle æ˜¯ Android Signature V2 Scheme ç­¾åä¸‹çš„æ–°ä¸€ä»£æ¸ é“åŒ…æ‰“åŒ…ç¥å™¨ï¼Œå®ƒåœ¨ Apk ä¸­çš„ APK Signature Block åŒºå—æ·»åŠ äº†è‡ªå®šä¹‰çš„æ¸ é“ä¿¡æ¯ä»¥ç”Ÿæˆæ¸ é“åŒ…ï¼Œå› è€Œæé«˜äº†æ¸ é“åŒ…çš„ç”Ÿæˆæ•ˆç‡ã€‚æ­¤å¤–ï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºå•æœºå·¥å…·æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ HTTP æœåŠ¡å™¨ä¸Šæ¥å®æ—¶å¤„ç†æ¸ é“åŒ… Apk çš„å‡çº§ç½‘ç»œè¯·æ±‚ï¼Œæœ‰éœ€è¦çš„åŒå­¦å¯ä»¥å‚è€ƒç¾å›¢çš„ <a href="https://link.juejin.cn/?target=https://github.com/Meituan-Dianping/walle">walle</a>ã€‚</p>
<h2 id="13ã€è®¾ç½®åº”ç”¨æ”¯æŒçš„è¯­è¨€"><a href="#13ã€è®¾ç½®åº”ç”¨æ”¯æŒçš„è¯­è¨€" class="headerlink" title="13ã€è®¾ç½®åº”ç”¨æ”¯æŒçš„è¯­è¨€"></a>13ã€è®¾ç½®åº”ç”¨æ”¯æŒçš„è¯­è¨€</h2><p>å¦‚æœåº”ç”¨æ²¡æœ‰åšå›½é™…åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥è®©åº”ç”¨ä»…ä»…æ”¯æŒ <strong>ä¸­æ–‡çš„èµ„æºé…ç½®</strong>ï¼Œå³å°† resConfigs è®¾ç½®ä¸º â€œzhâ€ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">    android &#123;</span><br><span class="line">        defaultConfig &#123;</span><br><span class="line">            resConfigs <span class="string">&quot;zh&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="14ã€ä½¿ç”¨å¢é‡ç¼–è¯‘"><a href="#14ã€ä½¿ç”¨å¢é‡ç¼–è¯‘" class="headerlink" title="14ã€ä½¿ç”¨å¢é‡ç¼–è¯‘"></a>14ã€ä½¿ç”¨å¢é‡ç¼–è¯‘</h2><p>Gradle çš„æ„å»ºæ–¹å¼é€šå¸¸æ¥è¯´ç»†åˆ†ä¸ºä»¥ä¸‹ ä¸‰ç§ï¼š</p>
<ul>
<li>1ï¼‰ã€Full Buildï¼šå…¨é‡æ„å»ºï¼Œå³ä»0å¼€å§‹æ„å»ºã€‚</li>
<li>2ï¼‰ã€Incremental build java changeï¼šå¢é‡æ„å»ºJavaæ”¹å˜ï¼Œä¿®æ”¹æºä»£ç åçš„æ„å»ºï¼Œä¸”ä¹‹å‰æ„å»ºè¿‡ã€‚</li>
<li>3ï¼‰ã€Incremental build resource changeï¼šä¿®æ”¹èµ„æºæ–‡ä»¶åçš„æ„å»ºï¼Œä¸”ä¹‹å‰æ„å»ºè¿‡ã€‚</li>
</ul>
<p>åœ¨ Gradle 4.10 ç‰ˆæœ¬ä¹‹åä¾¿é»˜è®¤ä½¿ç”¨äº†å¢é‡ç¼–è¯‘ï¼Œå®ƒä¼šæµ‹è¯•è‡ªä¸Šæ¬¡æ„å»ºä»¥æ¥æ˜¯å¦å·²æ›´æ”¹ä»»ä½• gradle task ä»»åŠ¡è¾“å…¥æˆ–è¾“å‡ºã€‚å¦‚æœè¿˜æ²¡æœ‰ï¼ŒGradle ä¼šå°†è¯¥ä»»åŠ¡è®¤ä¸ºæ˜¯æœ€æ–°çš„ï¼Œå› æ­¤è·³è¿‡æ‰§è¡Œå…¶åŠ¨ä½œã€‚ç”±äº Gradle å¯ä»¥å°†é¡¹ç›®çš„ä¾èµ–å…³ç³»åˆ†æç²¾ç¡®åˆ°ç±»çº§åˆ«ï¼Œå› æ­¤ï¼Œæ­¤æ—¶ä»…ä¼šé‡æ–°ç¼–è¯‘å—å½±å“çš„ç±»ã€‚å¦‚æœåœ¨æ›´è€çš„ç‰ˆæœ¬éœ€è¦å¯åŠ¨å¢é‡ç¼–è¯‘ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">    tasks.withType(JavaCompile) &#123;</span><br><span class="line">        options.incremental = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="15ã€ä½¿ç”¨å¾ªç¯è¿›è¡Œä¾èµ–ä¼˜åŒ–ï¼ˆğŸ”¥ï¼‰"><a href="#15ã€ä½¿ç”¨å¾ªç¯è¿›è¡Œä¾èµ–ä¼˜åŒ–ï¼ˆğŸ”¥ï¼‰" class="headerlink" title="15ã€ä½¿ç”¨å¾ªç¯è¿›è¡Œä¾èµ–ä¼˜åŒ–ï¼ˆğŸ”¥ï¼‰"></a>15ã€ä½¿ç”¨å¾ªç¯è¿›è¡Œä¾èµ–ä¼˜åŒ–ï¼ˆğŸ”¥ï¼‰</h2><p>åœ¨ Awesome-WanAndroid é¡¹ç›®çš„ app moudle çš„ build.gradle ä¸­ï¼Œæœ‰å°†è¿‘å‡ ç™¾è¡Œçš„ä¾èµ–ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">    dependencies &#123;</span><br><span class="line">        implementation fileTree(<span class="attr">include:</span> [<span class="string">&#x27;*.jar&#x27;</span>], <span class="attr">dir:</span> <span class="string">&#x27;libs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯åŠ¨å™¨</span></span><br><span class="line">        api files(<span class="string">&#x27;libs/launchstarter-release-1.0.0.aar&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">         <span class="comment">//base</span></span><br><span class="line">        implementation rootProject.ext.dependencies[<span class="string">&quot;appcompat-v7&quot;</span>]</span><br><span class="line">        implementation rootProject.ext.dependencies[<span class="string">&quot;cardview-v7&quot;</span>]</span><br><span class="line">        implementation rootProject.ext.dependencies[<span class="string">&quot;design&quot;</span>]</span><br><span class="line">        implementation rootProject.ext.dependencies[<span class="string">&quot;constraint-layout&quot;</span>]</span><br><span class="line">        </span><br><span class="line">        annotationProcessor rootProject.ext.dependencies[<span class="string">&quot;glide_compiler&quot;</span>]</span><br><span class="line">        </span><br><span class="line">         <span class="comment">//canary</span></span><br><span class="line">        debugImplementation (rootProject.ext.dependencies[<span class="string">&quot;leakcanary-android&quot;</span>]) &#123;</span><br><span class="line">            exclude <span class="attr">group:</span> <span class="string">&#x27;com.android.support&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        releaseImplementation (rootProject.ext.dependencies[<span class="string">&quot;leakcanary-android-no-op&quot;</span>]) &#123;</span><br><span class="line">            exclude <span class="attr">group:</span> <span class="string">&#x27;com.android.support&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        testImplementation (rootProject.ext.dependencies[<span class="string">&quot;leakcanary-android-no-op&quot;</span>]) &#123;</span><br><span class="line">            exclude <span class="attr">group:</span> <span class="string">&#x27;com.android.support&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        ...</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æœ‰æ²¡æœ‰ä¸€ç§å¥½çš„æ–¹å¼ä¸åœ¨ build.gradle ä¸­å†™è¿™ä¹ˆå¤šçš„ä¾èµ–é…ç½®ï¼Ÿ</p>
<p>æœ‰ï¼Œå°±æ˜¯ <strong>ä½¿ç”¨å¾ªç¯éå†ä¾èµ–</strong>ã€‚ç­”æ¡ˆä¼¼ä¹å¾ˆç®€å•ï¼Œä½†æ˜¯è¦æƒ³å¤„ç†åœ¨ä¾èµ–æ—¶é‡åˆ°çš„æ‰€æœ‰æƒ…å†µï¼Œå¹¶ä¸ç®€å•ã€‚ä¸‹é¢ï¼Œæˆ‘ç›´æ¥ç»™å‡ºç›¸åº”çš„é€‚é…ä»£ç ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨ app ä¸‹çš„ build.gradle çš„ä¾èµ–é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">    <span class="comment">// å¤„ç†æ‰€æœ‰çš„ aar ä¾èµ–</span></span><br><span class="line">    apiFileDependencies.each &#123; k, v -&gt; api files(v)&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†æ‰€æœ‰çš„ xxximplementation ä¾èµ–</span></span><br><span class="line">    implementationDependencies.each &#123; k, v -&gt; implementation v &#125;</span><br><span class="line">    debugImplementationDependencies.each &#123; k, v -&gt; debugImplementation v &#125;</span><br><span class="line">    releaseImplementationDependencies.each &#123; k, v -&gt; releaseImplementation v &#125;</span><br><span class="line">    androidTestImplementationDependencies.each &#123; k, v -&gt; androidTestImplementation v &#125;</span><br><span class="line">    testImplementationDependencies.each &#123; k, v -&gt; testImplementation v &#125;</span><br><span class="line">    debugApiDependencies.each &#123; k, v -&gt; debugApi v &#125;</span><br><span class="line">    releaseApiDependencies.each &#123; k, v -&gt; releaseApi v &#125;</span><br><span class="line">    compileOnlyDependencies.each &#123; k, v -&gt; compileOnly v &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç† annotationProcessor ä¾èµ–</span></span><br><span class="line">    processors.each &#123; k, v -&gt; annotationProcessor v &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†æ‰€æœ‰åŒ…å« exclude çš„ä¾èµ–</span></span><br><span class="line">    implementationExcludes.each &#123; entry -&gt;</span><br><span class="line">        implementation(entry.key) &#123;</span><br><span class="line">            entry.value.each &#123; childEntry -&gt;</span><br><span class="line">                exclude(<span class="attr">group:</span> childEntry)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    debugImplementationExcludes.each &#123; entry -&gt;</span><br><span class="line">        debugImplementation(entry.key) &#123;</span><br><span class="line">            entry.value.each &#123; childEntry -&gt;</span><br><span class="line">                exclude(<span class="attr">group:</span> childEntry.key, <span class="attr">module:</span> childEntry.value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    releaseImplementationExcludes.each &#123; entry -&gt;</span><br><span class="line">        releaseImplementation(entry.key) &#123;</span><br><span class="line">            entry.value.each &#123; childEntry -&gt;</span><br><span class="line">                exclude(<span class="attr">group:</span> childEntry.key, <span class="attr">module:</span> childEntry.value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    testImplementationExclude.each &#123; entry -&gt;</span><br><span class="line">        testImplementation(entry.key) &#123;</span><br><span class="line">            entry.value.each &#123; childEntry -&gt;</span><br><span class="line">                exclude(<span class="attr">group:</span> childEntry.key, <span class="attr">module:</span> childEntry.value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    androidTestImplementationExcludes.each &#123; entry -&gt;</span><br><span class="line">        androidTestImplementation(entry.key) &#123;</span><br><span class="line">            entry.value.each &#123; childEntry -&gt;</span><br><span class="line">                exclude(<span class="attr">group:</span> childEntry.key, <span class="attr">module:</span> childEntry.value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œåœ¨ config.gradle å…¨å±€ä¾èµ–ç®¡ç†æ–‡ä»¶ä¸­é…ç½®å¥½å¯¹åº”åç§°çš„ä¾èµ–æ•°ç»„å³å¯ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">    dependencies = [</span><br><span class="line">            <span class="comment">// base</span></span><br><span class="line">            <span class="string">&quot;appcompat-v7&quot;</span>                      : <span class="string">&quot;com.android.support:appcompat-v7:$&#123;version[&quot;</span>supportLibraryVersion<span class="string">&quot;]&#125;&quot;</span>ï¼Œ</span><br><span class="line">            ...</span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    annotationProcessor = [</span><br><span class="line">            <span class="string">&quot;glide_compiler&quot;</span>                    : <span class="string">&quot;com.github.bumptech.glide:compiler:$&#123;version[&quot;</span>glideVersion<span class="string">&quot;]&#125;&quot;</span>,</span><br><span class="line">            ...</span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    apiFileDependencies = [</span><br><span class="line">            <span class="string">&quot;launchstarter&quot;</span>                                   :<span class="string">&quot;libs/launchstarter-release-1.0.0.aar&quot;</span></span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    debugImplementationDependencies = [</span><br><span class="line">            <span class="string">&quot;MethodTraceMan&quot;</span>                                  : <span class="string">&quot;com.github.zhengcx:MethodTraceMan:1.0.7&quot;</span></span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    implementationExcludes = [</span><br><span class="line">            <span class="string">&quot;com.android.support.test.espresso:espresso-idling-resource:3.0.2&quot;</span> : [</span><br><span class="line">                    <span class="string">&#x27;com.android.support&#x27;</span> : <span class="string">&#x27;support-annotations&#x27;</span></span><br><span class="line">            ]</span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å…·ä½“çš„ä»£ç ç¤ºä¾‹å¯ä»¥åœ¨ Awesome-WanAndroid çš„ <a href="https://link.juejin.cn/?target=https://github.com/JsonChao/Awesome-WanAndroid/blob/master/app/build.gradle">build.gradle</a> å’Œ <a href="https://link.juejin.cn/?target=https://github.com/JsonChao/Awesome-WanAndroid/blob/master/config.gradle">config.gradle</a> ä¸Šè¿›è¡ŒæŸ¥çœ‹ã€‚</p>
<h1 id="ä¸‰ã€Gradle-å¸¸ç”¨å‘½ä»¤"><a href="#ä¸‰ã€Gradle-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ä¸‰ã€Gradle å¸¸ç”¨å‘½ä»¤"></a>ä¸‰ã€Gradle å¸¸ç”¨å‘½ä»¤</h1><h2 id="1ã€Gradle-æŸ¥è¯¢å‘½ä»¤"><a href="#1ã€Gradle-æŸ¥è¯¢å‘½ä»¤" class="headerlink" title="1ã€Gradle æŸ¥è¯¢å‘½ä»¤"></a>1ã€Gradle æŸ¥è¯¢å‘½ä»¤</h2><h3 id="1ï¼‰ã€æŸ¥çœ‹ä¸»è¦ä»»åŠ¡"><a href="#1ï¼‰ã€æŸ¥çœ‹ä¸»è¦ä»»åŠ¡" class="headerlink" title="1ï¼‰ã€æŸ¥çœ‹ä¸»è¦ä»»åŠ¡"></a>1ï¼‰ã€æŸ¥çœ‹ä¸»è¦ä»»åŠ¡</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew tasks</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="2ï¼‰ã€æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬ç¼“å­˜ä»»åŠ¡ç­‰ç­‰"><a href="#2ï¼‰ã€æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬ç¼“å­˜ä»»åŠ¡ç­‰ç­‰" class="headerlink" title="2ï¼‰ã€æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬ç¼“å­˜ä»»åŠ¡ç­‰ç­‰"></a>2ï¼‰ã€æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬ç¼“å­˜ä»»åŠ¡ç­‰ç­‰</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew tasks --all</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="2ã€Gradle-æ‰§è¡Œå‘½ä»¤"><a href="#2ã€Gradle-æ‰§è¡Œå‘½ä»¤" class="headerlink" title="2ã€Gradle æ‰§è¡Œå‘½ä»¤"></a>2ã€Gradle æ‰§è¡Œå‘½ä»¤</h2><h3 id="1ï¼‰ã€å¯¹æŸä¸ªmodule-moduleName-çš„æŸä¸ªä»»åŠ¡-TaskName-è¿è¡Œ"><a href="#1ï¼‰ã€å¯¹æŸä¸ªmodule-moduleName-çš„æŸä¸ªä»»åŠ¡-TaskName-è¿è¡Œ" class="headerlink" title="1ï¼‰ã€å¯¹æŸä¸ªmodule [moduleName]   çš„æŸä¸ªä»»åŠ¡[TaskName] è¿è¡Œ"></a>1ï¼‰ã€å¯¹æŸä¸ªmodule [moduleName]   çš„æŸä¸ªä»»åŠ¡[TaskName] è¿è¡Œ</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew :moduleName:taskName</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="3ã€Gradle-å¿«é€Ÿæ„å»ºå‘½ä»¤"><a href="#3ã€Gradle-å¿«é€Ÿæ„å»ºå‘½ä»¤" class="headerlink" title="3ã€Gradle å¿«é€Ÿæ„å»ºå‘½ä»¤"></a>3ã€Gradle å¿«é€Ÿæ„å»ºå‘½ä»¤</h2><p>Gradle æä¾›äº†ä¸€ç³»åˆ—çš„å¿«é€Ÿæ„å»ºå‘½ä»¤æ¥æ›¿ä»£ IDE çš„å¯è§†åŒ–æ„å»ºæ“ä½œï¼Œå¦‚æˆ‘ä»¬æœ€å¸¸ç”¨çš„ cleanã€build ç­‰ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œbuild å‘½ä»¤ä¼šæŠŠ debugã€release ç¯å¢ƒçš„åŒ…éƒ½æ„å»ºå‡ºæ¥ã€‚</p>
<h3 id="1ï¼‰ã€æŸ¥çœ‹æ„å»ºç‰ˆæœ¬"><a href="#1ï¼‰ã€æŸ¥çœ‹æ„å»ºç‰ˆæœ¬" class="headerlink" title="1ï¼‰ã€æŸ¥çœ‹æ„å»ºç‰ˆæœ¬"></a>1ï¼‰ã€æŸ¥çœ‹æ„å»ºç‰ˆæœ¬</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew -v</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="2ï¼‰ã€æ¸…é™¤-build-æ–‡ä»¶å¤¹"><a href="#2ï¼‰ã€æ¸…é™¤-build-æ–‡ä»¶å¤¹" class="headerlink" title="2ï¼‰ã€æ¸…é™¤ build æ–‡ä»¶å¤¹"></a>2ï¼‰ã€æ¸…é™¤ build æ–‡ä»¶å¤¹</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew clean</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="3ï¼‰ã€æ£€æŸ¥ä¾èµ–å¹¶ç¼–è¯‘æ‰“åŒ…"><a href="#3ï¼‰ã€æ£€æŸ¥ä¾èµ–å¹¶ç¼–è¯‘æ‰“åŒ…" class="headerlink" title="3ï¼‰ã€æ£€æŸ¥ä¾èµ–å¹¶ç¼–è¯‘æ‰“åŒ…"></a>3ï¼‰ã€æ£€æŸ¥ä¾èµ–å¹¶ç¼–è¯‘æ‰“åŒ…</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew build</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="4ï¼‰ã€ç¼–è¯‘å¹¶å®‰è£…-debug-åŒ…"><a href="#4ï¼‰ã€ç¼–è¯‘å¹¶å®‰è£…-debug-åŒ…" class="headerlink" title="4ï¼‰ã€ç¼–è¯‘å¹¶å®‰è£… debug åŒ…"></a>4ï¼‰ã€ç¼–è¯‘å¹¶å®‰è£… debug åŒ…</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew installDebug</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="5ï¼‰ã€ç¼–è¯‘å¹¶æ‰“å°æ—¥å¿—"><a href="#5ï¼‰ã€ç¼–è¯‘å¹¶æ‰“å°æ—¥å¿—" class="headerlink" title="5ï¼‰ã€ç¼–è¯‘å¹¶æ‰“å°æ—¥å¿—"></a>5ï¼‰ã€ç¼–è¯‘å¹¶æ‰“å°æ—¥å¿—</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew build --info</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="6ï¼‰ã€ç¼–è¯‘å¹¶è¾“å‡ºæ€§èƒ½æŠ¥å‘Šï¼Œæ€§èƒ½æŠ¥å‘Šä¸€èˆ¬åœ¨æ„å»ºå·¥ç¨‹æ ¹ç›®å½•-build-reports-profile-ä¸‹"><a href="#6ï¼‰ã€ç¼–è¯‘å¹¶è¾“å‡ºæ€§èƒ½æŠ¥å‘Šï¼Œæ€§èƒ½æŠ¥å‘Šä¸€èˆ¬åœ¨æ„å»ºå·¥ç¨‹æ ¹ç›®å½•-build-reports-profile-ä¸‹" class="headerlink" title="6ï¼‰ã€ç¼–è¯‘å¹¶è¾“å‡ºæ€§èƒ½æŠ¥å‘Šï¼Œæ€§èƒ½æŠ¥å‘Šä¸€èˆ¬åœ¨æ„å»ºå·¥ç¨‹æ ¹ç›®å½• build/reports/profile ä¸‹"></a>6ï¼‰ã€ç¼–è¯‘å¹¶è¾“å‡ºæ€§èƒ½æŠ¥å‘Šï¼Œæ€§èƒ½æŠ¥å‘Šä¸€èˆ¬åœ¨æ„å»ºå·¥ç¨‹æ ¹ç›®å½• build/reports/profile ä¸‹</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew build --profile</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="7ï¼‰ã€è°ƒè¯•æ¨¡å¼æ„å»ºå¹¶æ‰“å°å †æ ˆæ—¥å¿—"><a href="#7ï¼‰ã€è°ƒè¯•æ¨¡å¼æ„å»ºå¹¶æ‰“å°å †æ ˆæ—¥å¿—" class="headerlink" title="7ï¼‰ã€è°ƒè¯•æ¨¡å¼æ„å»ºå¹¶æ‰“å°å †æ ˆæ—¥å¿—"></a>7ï¼‰ã€è°ƒè¯•æ¨¡å¼æ„å»ºå¹¶æ‰“å°å †æ ˆæ—¥å¿—</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew build --info --debug --stacktrace</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="8ï¼‰ã€å¼ºåˆ¶æ›´æ–°æœ€æ–°ä¾èµ–ï¼Œæ¸…é™¤æ„å»ºåå†æ„å»º"><a href="#8ï¼‰ã€å¼ºåˆ¶æ›´æ–°æœ€æ–°ä¾èµ–ï¼Œæ¸…é™¤æ„å»ºåå†æ„å»º" class="headerlink" title="8ï¼‰ã€å¼ºåˆ¶æ›´æ–°æœ€æ–°ä¾èµ–ï¼Œæ¸…é™¤æ„å»ºåå†æ„å»º"></a>8ï¼‰ã€å¼ºåˆ¶æ›´æ–°æœ€æ–°ä¾èµ–ï¼Œæ¸…é™¤æ„å»ºåå†æ„å»º</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew clean build --refresh-<span class="keyword">dependencies</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="9ï¼‰ã€ç¼–è¯‘å¹¶æ‰“-Debug-åŒ…"><a href="#9ï¼‰ã€ç¼–è¯‘å¹¶æ‰“-Debug-åŒ…" class="headerlink" title="9ï¼‰ã€ç¼–è¯‘å¹¶æ‰“ Debug åŒ…"></a>9ï¼‰ã€ç¼–è¯‘å¹¶æ‰“ Debug åŒ…</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew assembleDebug</span><br><span class="line">    # ç®€åŒ–ç‰ˆå‘½ä»¤ï¼Œå–å„ä¸ªå•è¯çš„é¦–å­—æ¯</span><br><span class="line">    ./gradlew aD</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="10ï¼‰ã€ç¼–è¯‘å¹¶æ‰“-Release-çš„åŒ…"><a href="#10ï¼‰ã€ç¼–è¯‘å¹¶æ‰“-Release-çš„åŒ…" class="headerlink" title="10ï¼‰ã€ç¼–è¯‘å¹¶æ‰“ Release çš„åŒ…"></a>10ï¼‰ã€ç¼–è¯‘å¹¶æ‰“ Release çš„åŒ…</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew assembleRelease</span><br><span class="line">    # ç®€åŒ–ç‰ˆå‘½ä»¤ï¼Œå–å„ä¸ªå•è¯çš„é¦–å­—æ¯</span><br><span class="line">    ./gradlew aR</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="4ã€Gradle-æ„å»ºå¹¶å®‰è£…å‘½ä»¤"><a href="#4ã€Gradle-æ„å»ºå¹¶å®‰è£…å‘½ä»¤" class="headerlink" title="4ã€Gradle æ„å»ºå¹¶å®‰è£…å‘½ä»¤"></a>4ã€Gradle æ„å»ºå¹¶å®‰è£…å‘½ä»¤</h2><h3 id="1ï¼‰ã€Release-æ¨¡å¼æ‰“åŒ…å¹¶å®‰è£…"><a href="#1ï¼‰ã€Release-æ¨¡å¼æ‰“åŒ…å¹¶å®‰è£…" class="headerlink" title="1ï¼‰ã€Release æ¨¡å¼æ‰“åŒ…å¹¶å®‰è£…"></a>1ï¼‰ã€Release æ¨¡å¼æ‰“åŒ…å¹¶å®‰è£…</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew installRelease</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="2ï¼‰ã€å¸è½½-Release-æ¨¡å¼åŒ…"><a href="#2ï¼‰ã€å¸è½½-Release-æ¨¡å¼åŒ…" class="headerlink" title="2ï¼‰ã€å¸è½½ Release æ¨¡å¼åŒ…"></a>2ï¼‰ã€å¸è½½ Release æ¨¡å¼åŒ…</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew uninstallRelease</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="3ï¼‰ã€debug-release-æ¨¡å¼å…¨éƒ¨æ¸ é“æ‰“åŒ…"><a href="#3ï¼‰ã€debug-release-æ¨¡å¼å…¨éƒ¨æ¸ é“æ‰“åŒ…" class="headerlink" title="3ï¼‰ã€debug release æ¨¡å¼å…¨éƒ¨æ¸ é“æ‰“åŒ…"></a>3ï¼‰ã€debug release æ¨¡å¼å…¨éƒ¨æ¸ é“æ‰“åŒ…</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew assemble</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h2 id="5ã€Gradle-æŸ¥çœ‹åŒ…ä¾èµ–å‘½ä»¤"><a href="#5ã€Gradle-æŸ¥çœ‹åŒ…ä¾èµ–å‘½ä»¤" class="headerlink" title="5ã€Gradle æŸ¥çœ‹åŒ…ä¾èµ–å‘½ä»¤"></a>5ã€Gradle æŸ¥çœ‹åŒ…ä¾èµ–å‘½ä»¤</h2><h3 id="1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ä¾èµ–"><a href="#1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ä¾èµ–" class="headerlink" title="1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ä¾èµ–"></a>1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ä¾èµ–</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew <span class="keyword">dependencies</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="2ï¼‰ã€æŸ¥çœ‹-app-æ¨¡å—ä¸‹çš„ä¾èµ–"><a href="#2ï¼‰ã€æŸ¥çœ‹-app-æ¨¡å—ä¸‹çš„ä¾èµ–" class="headerlink" title="2ï¼‰ã€æŸ¥çœ‹ app æ¨¡å—ä¸‹çš„ä¾èµ–"></a>2ï¼‰ã€æŸ¥çœ‹ app æ¨¡å—ä¸‹çš„ä¾èµ–</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew app:<span class="keyword">dependencies</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="3ï¼‰ã€æŸ¥çœ‹-app-æ¨¡å—ä¸‹åŒ…å«-implementation-å…³é”®å­—çš„ä¾èµ–é¡¹ç›®"><a href="#3ï¼‰ã€æŸ¥çœ‹-app-æ¨¡å—ä¸‹åŒ…å«-implementation-å…³é”®å­—çš„ä¾èµ–é¡¹ç›®" class="headerlink" title="3ï¼‰ã€æŸ¥çœ‹ app æ¨¡å—ä¸‹åŒ…å« implementation å…³é”®å­—çš„ä¾èµ–é¡¹ç›®"></a>3ï¼‰ã€æŸ¥çœ‹ app æ¨¡å—ä¸‹åŒ…å« implementation å…³é”®å­—çš„ä¾èµ–é¡¹ç›®</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew app:<span class="keyword">dependencies</span> --configuration implementation</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h1 id="å››ã€ä½¿ç”¨-Build-Scan-è¯Šæ–­åº”ç”¨çš„æ„å»ºè¿‡ç¨‹"><a href="#å››ã€ä½¿ç”¨-Build-Scan-è¯Šæ–­åº”ç”¨çš„æ„å»ºè¿‡ç¨‹" class="headerlink" title="å››ã€ä½¿ç”¨ Build Scan è¯Šæ–­åº”ç”¨çš„æ„å»ºè¿‡ç¨‹"></a>å››ã€ä½¿ç”¨ Build Scan è¯Šæ–­åº”ç”¨çš„æ„å»ºè¿‡ç¨‹</h1><p>åœ¨äº†è§£ Build Scan ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¥ä¸€èµ·å­¦ä¹ ä¸‹æ—§æ—¶ä»£çš„ Gradle build è¯Šæ–­å·¥å…· Profile reportã€‚</p>
<h2 id="1ã€Profile-report"><a href="#1ã€Profile-report" class="headerlink" title="1ã€Profile report"></a>1ã€Profile report</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥ç”Ÿæˆä¸€ä»½æœ¬åœ°çš„æ„å»ºåˆ†ææŠ¥å‘Šï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew assembleDebug --profile</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨ <a href="https://link.juejin.cn/?target=https://github.com/JsonChao/Awesome-WanAndroid">Awesome-WanAndroid</a> Appçš„æ ¹ç›®å½•ä¸‹è¿è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥å¾—åˆ°å››å—è§†å›¾ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸‹ã€‚</p>
<h3 id="1ï¼‰ã€Summary"><a href="#1ï¼‰ã€Summary" class="headerlink" title="1ï¼‰ã€Summary"></a>1ï¼‰ã€Summary</h3><p><strong>Gradle æ„å»ºä¿¡æ¯çš„æ¦‚è§ˆç•Œé¢</strong>ï¼Œç”¨äº <strong>æŸ¥çœ‹ Total Build Timeã€åˆå§‹åŒ–ï¼ˆåŒ…å« Startupã€Settings and BuildSrcã€Loading Projects ä¸‰éƒ¨åˆ†ï¼‰ã€é…ç½®ã€ä»»åŠ¡æ‰§è¡Œçš„æ—¶é—´</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78c035e5d3fb4040b7b0959bb5ba235b~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<h3 id="2ï¼‰ã€Configuaration"><a href="#2ï¼‰ã€Configuaration" class="headerlink" title="2ï¼‰ã€Configuaration"></a>2ï¼‰ã€Configuaration</h3><p><strong>Gradle é…ç½®å„ä¸ªå·¥ç¨‹æ‰€èŠ±è´¹çš„æ—¶é—´</strong>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <strong>All projectsã€app æ¨¡å—ä»¥åŠå…¶å®ƒæ¨¡å—å•ä¸ªçš„é…ç½®æ—¶é—´</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1534456dbf54ceab861a10a4a1e8ecc~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<h3 id="3ï¼‰ã€Dependency-Resolution"><a href="#3ï¼‰ã€Dependency-Resolution" class="headerlink" title="3ï¼‰ã€Dependency Resolution"></a>3ï¼‰ã€Dependency Resolution</h3><p><strong>Gradle åœ¨å¯¹å„ä¸ª task è¿›è¡Œä¾èµ–å…³ç³»è§£ææ—¶æ‰€èŠ±è´¹çš„æ—¶é—´</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f1b5a1c9e2c64a3da60b79b6d9a1e6a4~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<h3 id="4ï¼‰ã€Task-Execution"><a href="#4ï¼‰ã€Task-Execution" class="headerlink" title="4ï¼‰ã€Task Execution"></a>4ï¼‰ã€Task Execution</h3><p><strong>Gradle åœ¨æ‰§è¡Œå„ä¸ª Gradle task æ‰€èŠ±è´¹çš„æ—¶é—´</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf923fff065c4e5c99693e9a2e311280~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTask Execution çš„æ—¶é—´æ˜¯æ‰€æœ‰ gradle task æ‰§è¡Œæ—¶é—´çš„æ€»å’Œï¼Œå®é™…ä¸Š <strong>å¤šæ¨¡å—çš„ä»»åŠ¡æ˜¯å¹¶è¡Œæ‰§è¡Œçš„</strong>ã€‚</p>
<h2 id="2ã€Build-Scan"><a href="#2ã€Build-Scan" class="headerlink" title="2ã€Build Scan"></a>2ã€Build Scan</h2><p><strong>Build Scan æ˜¯å®˜æ–¹æ¨å‡ºçš„ç”¨äºè¯Šæ–­åº”ç”¨æ„å»ºè¿‡ç¨‹çš„æ€§èƒ½æ£€æµ‹å·¥å…·ï¼Œå®ƒèƒ½åˆ†æå‡ºå¯¼è‡´åº”ç”¨æ„å»ºé€Ÿåº¦æ…¢çš„ä¸€äº›é—®é¢˜</strong>ã€‚åœ¨é¡¹ç›®ä¸‹ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯å¼€å¯ Build Scan è¯Šæ–­ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    ./gradlew build --scan </span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Macï¼Œä½¿ç”¨ä¸Šè¿°å‘½ä»¤æ—¶å‡ºç°</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    zsh: permission denied: ./gradlew</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¯ä»¥åŠ å…¥ä¸‹é¢çš„å‘½ç»™ gradlew åˆ†é…æ‰§è¡Œæƒé™ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">    chmod +x gradlew</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œå®Œ build â€“scan å‘½ä»¤ä¹‹åï¼Œåœ¨å‘½ä»¤çš„æœ€åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06cfe85b86e14948a3fb7a9119cdaec7~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ Publishing build scan ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥å°±å¯ä»¥è·³è½¬åˆ° Build Scan çš„è¯Šæ–­é¡µé¢ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ Build Scanï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨è‡ªå·±çš„é‚®ç®±æ¿€æ´» Build Scanã€‚å¦‚ä¸‹å›¾ç•Œé¢æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a018f50e2724dea872463ff07c617d5~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>è¿™é‡Œï¼Œæˆ‘è¾“å…¥äº†æˆ‘çš„é‚®ç®± <a href="https://link.juejin.cn/?target=mailto:chao.qu521@gmail.com">chao.qu521@gmail.com</a>ï¼Œç‚¹å‡» Goï¼ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç™»å½•æˆ‘ä»¬çš„é‚®ç®±å»ç¡®è®¤æˆæƒå³å¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30c70a60ab3d41c79ce5885639ac10de~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>ç›´æ¥ç‚¹å‡» <strong>Discover your build</strong> å³å¯ã€‚</p>
<p>æˆæƒæˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ° Build Scan çš„è¯Šæ–­é¡µé¢äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6a3173bc747a4868ae47e2ab2a40b921~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç•Œé¢çš„å³è¾¹æœ‰ä¸€ç³»åˆ—çš„åŠŸèƒ½ tab å¯ä¾›æˆ‘ä»¬é€‰æ‹©æŸ¥çœ‹ï¼Œè¿™é‡Œé»˜è®¤æ˜¯ Summary æ€»è§ˆç•Œé¢ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯è¦æŸ¥çœ‹ åº”ç”¨çš„æ„å»ºæ€§èƒ½ï¼Œæ‰€ä»¥ç‚¹å‡»å³ä¾§çš„ Performance tab å³å¯çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ„å»ºåˆ†æç•Œé¢ï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/874b6acb92da48b5a4609c98c4359424~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œ<strong>Performance ç•Œé¢ä¸­é™¤äº† Buildã€Configurationã€Dependency resolutionã€Task execution è¿™å››é¡¹å¤–ï¼Œè¿˜æœ‰ Daemonã€Network activityã€Settings and suggestions</strong>ã€‚</p>
<p>åœ¨ Build ç•Œé¢ä¸­ï¼Œå…±æœ‰ä¸‰ä¸ªå­é¡¹ç›®ï¼Œå³ <strong>Total build timeã€Total garbage collection timeã€Peak heap memory usage</strong>ï¼ŒTotal build time é‡Œé¢çš„é…ç½®é¡¹å‰é¢æˆ‘ä»¬å·²ç»åˆ†æè¿‡äº†ï¼Œè¿™é‡Œæˆ‘ä»¬çœ‹çœ‹å…¶ä½™ä¸¤é¡¹çš„å«ä¹‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>Total garbage collection timeï¼šæ€»çš„åƒåœ¾å›æ”¶æ—¶é—´ã€‚</li>
<li>Peak heap memory usageï¼šæœ€å¤§å †å†…å­˜ä½¿ç”¨ã€‚</li>
</ul>
<p>å¯¹äº Peak heap memory usage è¿™ä¸€é¡¹æ¥è¯´ï¼Œè¿˜æœ‰ä¸‰ä¸ªå­é¡¹ï¼Œå…¶å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>1ï¼‰ã€PS Eden Spaceï¼šYoung Generation çš„ Edenï¼ˆä¼Šç”¸å›­ï¼‰ç‰©ç†å†…å­˜åŒºåŸŸã€‚ç¨‹åºä¸­ç”Ÿæˆçš„å¤§éƒ¨åˆ†æ–°çš„å¯¹è±¡éƒ½åœ¨ Eden åŒºä¸­ã€‚</li>
<li>2ï¼‰ã€PS Survivor Spaceï¼šYoung Generation çš„ Eden çš„ ä¸¤ä¸ªSurvivorï¼ˆå¹¸å­˜è€…ï¼‰ç‰©ç†å†…å­˜åŒºåŸŸã€‚å½“ Eden åŒºæ»¡æ—¶ï¼Œè¿˜å­˜æ´»çš„å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°å…¶ä¸­ä¸€ä¸ª Survivor åŒºï¼Œå½“æ­¤ Survivor åŒºæ»¡æ—¶ï¼Œæ­¤åŒºå­˜æ´»çš„å¯¹è±¡åˆè¢«å¤åˆ¶åˆ°å¦ä¸€ä¸ª Survivor åŒºï¼Œå½“è¿™ä¸ª Survivor åŒºä¹Ÿæ»¡æ—¶ï¼Œä¼šå°†å…¶ä¸­å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¹´è€ä»£ã€‚</li>
<li>3ï¼‰ã€PS Old Genï¼šOld Generationï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¹´è€ä»£ä¸­çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸéƒ½æ¯”è¾ƒé•¿ã€‚</li>
</ul>
<p>ç”±äºæˆ‘ä»¬çš„ç›®çš„æ˜¯å…³æ³¨é¡¹ç›®çš„ build æ—¶é—´ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç›´æ¥å…³æ³¨åˆ° Task execution è¿™ä¸€é¡¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59d0bdd78ad24cb382c1097ace8c7e80~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒAwesome-WanAndroid é¡¹ç›®ä¸­æ‰€æœ‰çš„ task éƒ½æ˜¯ Not cacheable çš„ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¾€ä¸‹æ»‘åŠ¨ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰ task çš„æ„å»ºæ—¶é—´ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7a946b452e747f8b616b008fe0ec11d~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>å¦‚æœï¼Œæˆ‘ä»¬æƒ³æŸ¥çœ‹ä¸€ä¸ª tinyPicPluginSpeedRelease è¿™ä¸€ä¸ª task çš„æ‰§è¡Œè¯¦ç»†ï¼Œå¯ä»¥ç‚¹å‡» :app:tinyPicPluginSpeedRelease è¿™ä¸€é¡¹ï¼Œç„¶åï¼Œå°±ä¼šè·³è½¬åˆ° Timeline ç•Œé¢ï¼Œæ˜¾ç¤ºå‡º tinyPicPluginSpeedRelease ç›¸åº”çš„æ‰§è¡Œä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b6e3f9f091884174abccc5551ddeb69b~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>æ­¤å¤–ï¼Œè¿™é‡Œæˆ‘ä»¬ç‚¹å‡»å¼¹å‡ºæ¡†å³ä¸Šæ–¹çš„ç¬¬ä¸€ä¸ªå›¾æ ‡ï¼šFocus on task in timeline å³å¯çœ‹åˆ°è¯¥ task åœ¨æ•´ä¸ª Gradle build æ—¶é—´çº¿ä¸Šçš„ç²¾ç¡®ä½ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a17bc09031964a1cb223afeb32a967f4~tplv-k3u1fbpfcp-watermark.awebp" alt="image"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Build Scan çš„åŠŸèƒ½è¦æ¯” Profile report å¼ºå¤§ä¸å°‘ï¼Œæ‰€ä»¥æˆ‘å¼ºçƒˆå»ºè®®ä¼˜å…ˆä½¿ç”¨å®ƒè¿›è¡Œ Gradle æ„å»ºæ—¶é—´çš„è¯Šæ–­ä¸ä¼˜åŒ–ã€‚</p>
<h1 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h1><p>Gradle æ¯æ¬¡æ„å»ºçš„è¿è¡Œæ—¶é—´ä¼šéšç€é¡¹ç›®ç¼–è¯‘æ¬¡æ•°è¶Šæ¥å°‘ï¼Œå› æ­¤ä¸ºäº†å‡†ç¡®è¯„ä¼° Gradle æ„å»ºæé€Ÿçš„ä¼˜åŒ–æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¼˜åŒ–å‰ååˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå¯¹æ¯”åˆ†æï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    gradlew --profile --recompile-scripts --offline --rerun-tasks assembleDebug</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å‚æ•°å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>profileï¼šå¼€å¯æ€§èƒ½æ£€æµ‹ã€‚</li>
<li>recompile-scriptsï¼šä¸ä½¿ç”¨ç¼“å­˜ï¼Œç›´æ¥é‡æ–°ç¼–è¯‘è„šæœ¬ã€‚</li>
<li>offlineï¼šå¯ç”¨ç¦»çº¿ç¼–è¯‘æ¨¡å¼ã€‚</li>
<li>return-taskï¼šè¿è¡Œæ‰€æœ‰ gradle task å¹¶å¿½ç•¥æ‰€æœ‰ä¼˜åŒ–ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼ŒFacebook çš„ Buck ä»¥åŠ Google çš„ Bazel éƒ½æ˜¯ä¼˜ç§€çš„ç¼–è¯‘å·¥å…·ï¼Œé‚£ä¹ˆä»–ä»¬ä¸ºä»€ä¹ˆæ²¡æœ‰ä½¿ç”¨å¼€æºçš„æ„å»ºå·¥å…·å‘¢ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ ä¸‰ç‚¹åŸå› ï¼š</p>
<ul>
<li>1)ã€ç»Ÿä¸€ç¼–è¯‘å·¥å…·ï¼šå†…éƒ¨çš„æ‰€æœ‰é¡¹ç›®éƒ½ä½¿ç”¨åŒä¸€å¥—æ„å»ºå·¥å…·ï¼ŒåŒ…æ‹¬ Androidã€Javaã€iOSã€Goã€C++ ç­‰ã€‚ç¼–è¯‘å·¥å…·çš„ç»Ÿä¸€ä¼˜åŒ–ä¼šä½¿æ‰€æœ‰é¡¹ç›®å—ç›Šã€‚</li>
<li>2)ã€ä»£ç ç»„ç»‡ç®¡ç†æ¶æ„ï¼šFacebook å’Œ Google çš„æ‰€æœ‰é¡¹ç›®éƒ½æ”¾åˆ°åŒä¸€ä¸ªä»“åº“é‡Œé¢ï¼Œå› æ­¤æ•´ä¸ªä»“åº“éå¸¸åºå¤§ï¼Œå¹¶ä¸”ï¼Œä»–ä»¬ä¹Ÿä¸ä¼šä½¿ç”¨ Gitã€‚ç›®å‰ Google ä½¿ç”¨çš„æ˜¯<a href="https://link.juejin.cn/?target=http://www.ruanyifeng.com/blog/2016/07/google-monolithic-source-repository.html">Piper</a>ï¼ŒFacebook æ˜¯åŸºäº<a href="https://link.juejin.cn/?target=https://www.mercurial-scm.org/">HG</a>ä¿®æ”¹çš„ï¼Œä¹Ÿæ˜¯ä¸€ç§åŸºäºåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿã€‚</li>
<li>3)ã€æè‡´çš„æ€§èƒ½è¿½æ±‚ï¼šBuck å’Œ Bazel çš„æ€§èƒ½çš„ç¡®æ¯” Gradle æ›´å¥½ï¼Œå†…éƒ¨åŒ…å«å®ƒä»¬çš„å„ç§ç¼–è¯‘ä¼˜åŒ–ã€‚ä½†æ˜¯å®ƒä»¬çš„å®šåˆ¶å‹å¤ªå¼ºï¼Œè€Œä¸”å¯¹ Mavenã€JCenter è¿™æ ·çš„å¤–éƒ¨ä¾èµ–æ”¯æŒä¹Ÿä¸å¥½ã€‚</li>
</ul>


<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>è®¸å¯åè®®</span></div><div class="body"><p>æœ¬æ–‡é‡‡ç”¨ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="header cap theme"><span>æ¥ä¸‹æ¥é˜…è¯»</span></section><section class="body fs14"><a id="next" href="/blog/2021-11-1-%E4%BB%A3%E7%A0%81%E6%B7%B7%E6%B7%86/">ä»£ç æ··æ·†<span class="note">è¾ƒæ—©</span></a><div class="line"></div><div class="line"></div><a id="more" href="/blog/archives">æ£€ç´¢å…¨éƒ¨æ–‡ç« </a></section></div>






  <div class='related-wrap md reveal' id="comments">
    <div class='cmt-title cap theme'>
      å¿«æ¥å‚ä¸è®¨è®ºå§
    </div>
    <div class='cmt-body beaudar'>
      

<svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg>

<div id="beaudar" repo="liwentuo/blog-comments" issue-term="pathname" theme="preferred-color-scheme" input-position="top" comment-order="desc" loading="false" branch="main"></div>

    </div>
  </div>



      
<footer class="page-footer reveal fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">åšå®¢</span><a href="/">è¿‘æœŸå‘å¸ƒ</a><a href="/blog/categories/">åˆ†ç±»</a><a href="/blog/tags/">æ ‡ç­¾</a><a href="/blog/archives/">å½’æ¡£</a></div><div class="sitemap-group"><span class="fs14">é¡¹ç›®</span><a href="/wiki/tags/%E5%BC%80%E6%BA%90%E5%BA%93/">å¼€æºåº“</a><a href="/wiki/tags/%E5%AE%9E%E7%94%A8%E8%84%9A%E6%9C%AC/">å®ç”¨è„šæœ¬</a><a href="/wiki/tags/%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98/">åšå®¢ä¸»é¢˜</a><a href="/wiki/tags/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/">åº”ç”¨ç¨‹åº</a></div><div class="sitemap-group"><span class="fs14">ç¤¾äº¤</span><a href="/friends/">å‹é“¾</a><a href="/about/#comments">ç•™è¨€æ¿</a></div><div class="sitemap-group"><span class="fs14">æ›´å¤š</span><a href="/about/">å…³äºæœ¬ç«™</a><a target="_blank" rel="noopener" href="https://github.com/liwentuo">GitHub</a></div></div><div class="text"><p>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>æœ¬ç«™ç”± <a href="http://liwentuo.github.io/">@david</a> åˆ›å»ºï¼Œä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.5.1" title="v1.5.1">Stellar</a> ä½œä¸ºä¸»é¢˜ã€‚</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  stellar = {
    // æ‡’åŠ è½½ css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // ä» butterfly å’Œ volantis è·å¾—çµæ„Ÿ
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // é»˜è®¤å¼‚æ­¥ï¼Œå¦‚æœéœ€è¦åŒæ­¥ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ {} å³å¯
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.5.1';
  stellar.config = {
    date_suffix: {
      just: 'åˆšåˆš',
      min: 'åˆ†é’Ÿå‰',
      hour: 'å°æ—¶å‰',
      day: 'å¤©å‰',
      month: 'ä¸ªæœˆå‰',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/js/plugins/sites.js',
    friendsjs: '/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@6/swiper-bundle.min.css","js":"https://unpkg.com/swiper@6/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://cdn.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->

  <script>
  function loadBeaudar() {
    const els = document.querySelectorAll("#comments #beaudar");
    if (els.length === 0) return;
    els.forEach((el, i) => {
      try {
        el.innerHTML = '';
      } catch (error) {
        console.log(error);
      }
      var script = document.createElement('script');
      script.src = 'https://beaudar.lipk.org/client.js';
      script.async = true;
      for (let key of Object.keys(el.attributes)) {
        let attr = el.attributes[key];
        if (['class', 'id'].includes(attr.name) === false) {
          script.setAttribute(attr.name, attr.value);
        }
      }
      el.appendChild(script);
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
      loadBeaudar();
  });
</script>




<!-- inject -->


  </div>
</body>
</html>
